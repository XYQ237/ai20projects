2020 IEEE International Conference on Robotics and Automation (ICRA)
31 May - 31 August, 2020. Paris, France
Controlling Fast Height Variation of an Actively Articulated Wheeled
Humanoid Robot Using Center of Mass Trajectory
Moyin V. Otubela and Conor McGinn
Abstract—Hybridwheel-leggedrobotshavebeguntodemon- the DARPA Robotics Challenge where the leading team
strate the ability to adapt to complex terrain traditionally in- in a disaster response challenge used the hybrid platform,
accessible to purely wheeled morphologies. Further research is
DRC-HUBO+[1], that made intelligent use of its wheeled
neededintohowtheirdynamicscanbeoptimallycontrolledfor
and legged modes to optimally execute various tasks in
developing highly adaptive behaviours on challenging terrain.
Using optimal center of mass (COM) kinematic trajectories, the competition. Limited literature exists that explores the
thisworkexaminesthenonlineardynamicscontrolproblemfor dynamics control problem of hybrid systems for performing
fastheightadaptationonthehybridhumanoidplatformknown the level of terrain adaptability normally reserved for biped
as Aerobot. We explore the dynamics control problem through
robots [2].
experimentation with an ofﬂine trajectory optimisation (TO)
Aerobot is a hybrid wheel-leg humanoid robot that has
methodandatask-spaceinversedynamics(TSID)controllerfor
varying the robot’s height. Our TO approach uses sequential recentlydemonstratedimpressivelocomotivecapabilitiesun-
quadraticprogramming(SQP)tosolveoptimal7thorderspline der real-world situations including step climbing and train
coefﬁcients for the robot’s kinematics. The nonlinear Zero boarding [3]. A new controller was recently developed to
Moment Point (ZMP) is used to model a stability criterion
automate this process using trajectory optimisation methods
that is constrained in the TO problem to ensure dynamic
that generated dynamically stable whole body motion plans
stability. Our TSID controller follows motion plans based on
usingtaskjacobiansandasimpliﬁedpassivedynamicsmodelof [4]. The primary limitation of this method was its ofﬂine
the Aerobot platform. Results exhibit fast height adaptation on control architecture, due to the high computational cost of
theAerobotplatformwithsigniﬁcantlydifferingresultsbetween solving the required nonlinear optimisation problems. As a
thecontrolmethodsthatpromptsnewresearchintohowitmay
result, the robot could not react to abrupt changes in its
be controlled online.
environmental conditions. A key motivation of this paper
I. INTRODUCTION is the development of a new motion planner that overcomes
There are many applications of service robots that neces- this limitation.
sitates them operating alongside people in normal, everyday Thisworkaimstobuilduponconceptsthatencouragefast
settings. Environments engineered for human occupancy are and robust control for Aerobot. We start this endeavour by
carefully designed with anthropomorphic requirements in demonstrating fast and highly stable dynamic height adjust-
mind, prompting the need for service robots to be slender ment, a task that to the best of our knowledge has not been
enoughtotravelbetweendoorswhilesimultaneouslyhaving demonstrated on a wheeled system that resembles closely
the capacity to vary their height to perform tasks such a humanoid morphology. The theory behind our approach
as accessing shelves and tables. The choice of kinematic is discussed in section III followed with a discussion on
morphology is among the biggest decisions that designers how a model of the systems dynamics is built in section IV.
of service robots make. Bipedal robots, by virtue of sharing SectionVexhibitsthetrajectoryoptimisationandtask-space
similarkinematicswithhumans,inherittheabilitytotraverse inverse dynamics methods. Then sections VI, VII and VIII
unstructured terrain via planning discrete combinations of present the results, discussion and conclusions, respectively.
steps. Unfortunately, these legged systems suffer from sig-
II. PRIORWORK
niﬁcant issues regarding their ability to maintain its stability
without computationally costly methods and can be practi- Trajectory optimisation (TO) is a control method that
cally difﬁcult to implement. An alternative morphology in consists of generating temporal sequences of control inputs
the literature is the wheeled/tracked robot. This platform is foradaptingarobot’sposturetoitssurroundingsandinternal
mechanically much simpler and normally possesses higher states [2], [5]. Typically, the dynamics of these systems are
stability and improved controllability. However, it comes modelled to develop a stability criteria of which is subse-
with the signiﬁcant penalty of having a lower terrain adapt- quently constrained in an optimisation problem to prevent
ability. New research is investigating novel hybrid robot falling and maintain postural balance. In [6], a trajectory
morphologies that bring together the best of both biped optimization method was shown to control various robot
and wheeled systems into a single platform. The potential morphologies through modelling the full passive rigid body
for these systems to perform promisingly was evident in dynamics of these systems as they interacted with complex
terrainviafrictionandinelasticimpactswithoutapre-deﬁned
*ThisresearchwasfundedbytheIrishResearchCouncil. contact schedule. DURUS [7], a humanoid robot developed
Moyin V. Otubela and Conor McGinn are with the School of Engi-
at SRI utilizes highly efﬁcient electro-mechanical actuators,
neering,TrinityCollegeDublin,Dublin,Irelandotubelam@tcd.ie,
mcginnc@tcd.ie active springs at its ankles, and a motion planner that made
978-1-7281-7395-5/20/$31.00 ©2020 IEEE 1518
Authorized licensed use limited to: La Trobe University. Downloaded on September 21,2020 at 13:02:47 UTC from IEEE Xplore.  Restrictions apply. use of the full dynamics of the robot enabling it to achieve through experimenting, contrasting and comparing with two
highly efﬁcient walking trajectories. control methods on the novel platform.
The prior art referenced in the ﬁrst paragraph has show-
III. THEORY
cased locomotion and traversal of complex, indeterminate
terrainusingfullrobotdynamicmodels,whichhavereliedon The ZMP model referred to in this paper assumes negli-
inherently computationally intensive methods which greatly gible momentum and is based on the equation provided in
slows down the control frequency. It is common to simplify [16]. Mathematically, it is denoted in equation 1.
the full dynamics of robotic systems in order to reduce
− c c¨
the computational complexity of models. This is normally x =c z x (1)
zmp x g+c¨
achieved by relating the model to the behaviour of a robot’s z
centre of mass (COM) which can be used for inferring the where: c and c are the horizontal and vertical location
x z
stability of a robot [8], [9], [10]. for a robot’s COM, where, c¨ and c¨ are their accelerations
x z →
A popular model for understanding a robot’s dynamic respectively. g is the acceleration due to gravity. As c¨ 0
x
stability is the nonlinear ZMP. This model uses a robot’s it is shown in equations 2a, 2b and 2c that the location of
COM position, acceleration and rate of change of angular the robot’s ZMP is coincident with its COM, no matter the
momentum to determine if, at a given instant, a system will heightoftherobot’sCOMoritsverticalaccelerationaslong
tip over [9]. By assuming a constant vertical height of a as it does not cause the robot to lift-off. This suggests that a
robot’s COM this model becomes linear, and is referred minimal horizontal acceleration is ideal for minimising the
to as the Linear Inverted Pendulum Model (LIPM), which rapid ﬂuctuating of a stability criterion based on the ZMP
can be seen used popularly by biped robots [11], [12], model. This formulation greatly simpliﬁes and linearises the
[13]. Thanks to its linear formulation, Quadratic Program- dynamicsproblemof which aQPsolvercanbe usedtoplan
ming (QP) can be used to constrain feasible COM motion optimalCOMmotionforheightadjustmentonarobotwhen
plans at greatly reduced solver times [14]. However, due assuming that its horizontal movement is negligible.
to assuming a constant COM height, this model can not − 0 →
predictarobot’sstabilitywhileperformingtasksthatinclude xzmp =cx g+c¨ , c¨x 0 (2a)
z
variation of its height. This problem has been addressed by
− 0 → →∞
adding additional constraints in the optimisation problem x =c ∞, c¨ 0, c¨ (2b)
with reference to the LIPM for determining stability. In zmp x g+ x z
[15] these constraints came in the form of inequalities that
bounded COM accelerations based on the extreme limits xzmp =cx (2c)
→
of a biped robot’s COM heights. This is a valid approach When c¨ 0 the LIPM appears as shown in equation 3a.
z
by virtue of a robot’s center of pressure residing on a line Assuming no vertical acceleration of the robot’s COM, the
segment between a valid range of COM heights of a robot height of the COM can be assumed to be constant. Since
but results in overly restricted movement. acceleration due to gravity is constant, the fraction cz can
The contributions this paper offers the state-of-the-art berepresentedasaconstantnumber,K ,inequation3gband
z
are threefold. Firstly, with reference to the nonlinear ZMP 3c. This magnitude of this number is dependent solely on
model, we derive objectives that permit the use of QP the height of the robot’s COM. Consequently, this quality
solvers for fast height variation and locomotion. Secondly, ampliﬁes the ﬂuctuations of a robot’s horizontal ZMP. This
we develop two controllers for performing fast height vari- suggestslowerCOMheightsaremorestablethantheircorre-
ation on the Aerobot platform; one with TO and the other spondinghighercounterparts.Inaddition,unlikeinequations
using TSID. Using the theory postulated in this paper in 2b and 2c, careful attention to the robot’s acceleration must
section III, we modify the control problem to be solved in be paid to ensure stability as exhibited in equations 3c and
ordertoenhancetherobustnessoftheemergentbehaviourof 3d.
a simulated model of Aerobot. For the TS inverse dynamics
problem in particular, the complexity of the reference COM x =c − czc¨x, c¨ →0 (3a)
trajectory to be tracked is shown to be greatly simpliﬁed zmp x g z
thanks to our approach. And thirdly, we offer a study based −
x =c K c¨ (3b)
on the results of the controllers’ performances. Due to the zmp x z x
− ∞ → →∞
mechanical design and purpose of the robot, an important x =c K , c¨ 0, c¨ (3c)
zmp x z z x
performancefeatureweaimforintherobotisinitsabilityto −∞
x = (3d)
maintainanuprighttorsoasittransitionsbetweenitsextreme zmp
sitting and standing body conﬁgurations. This is a complex The deviation between COM and ZMP can also be seen
issue by virtue of the mass-distribution and morphology to be minimized if the coordinated effect of each centre of
of the robot which have been shown to put the system at mass causes the overall centre of mass to have minimum
risk of tipping over due to the platform’s torso having a acceleration.Inaddition,thecontributoryeffectofeachcen-
considerable proportion of the robot’s total mass [3], [4]. tre of mass’ acceleration on the ZMP is evidently dependent
Our work further investigates Aerobot’s dynamics problem on the weight distribution of the robot. For masses on the
1519
Authorized licensed use limited to: La Trobe University. Downloaded on September 21,2020 at 13:02:47 UTC from IEEE Xplore.  Restrictions apply. robot with weights tending towards zero, their acceleration
hasincreasinglyminimaleffectontherobot’sZMPdeviation
from its centre of mass position.
From these insights, it is apparent that a motion planner
may beneﬁt by taking into account these effects to allow for
fastlocomotionwhileitsZMPresidesclosetoitsCOM.This
means that minimization of the respective joint coordinated
accelerations with the largest effect on ZMP deviation from
theCOMcanbeoptimisedtoimprovedynamicstability.This
promptsthedevelopmentofaheuristicweightingstrategyfor
anonlinearTOmethodwheresomeadvantagemaybereaped
for escaping entrapment from local minima which might be
complicated from using multiple nonlinear objectives.
In addition the theory suggests ways in which the non- Fig.1. KinematicsofAerobotplatform.
linear ZMP model can be converted into a linear one to
be used by a QP solver. Hence for a task such as height
adjustment, the ZMP can be assumed coincident with the V. MOTIONOPTIMIZATION
initial COM horizontal location, as long as the robot keeps
A general description of the robot’s motion optimization,
c¨x to a minimum and c¨z below the required amount needed isgiveninthissection.Twocontrollersarepresented.Firstly,
to take off from the ground.
we show our TO method which is solved via a sequential
IV. MODELLINGAEROBOT quadratic programme (SQP), available in MATLAB’s opti-
mization toolbox. Secondly a TSID controller is exhibited
Formodellingandcontrollingthebehaviouroftherobot,a
which is solved by quadratic programming (QP) that we
template dynamic model was instantiated to perform inverse
execute on MATLAB’s optimization toolbox.
dynamics for the calculation of force control inputs needed
to execute whole body motion plans. The free-ﬂoating base
A. Trajectory Optimization
for Aerobot is located mid-way between its shank drive
The TO problem solves the local minimum of the sum
wheels, see ﬁgure 1. This component is under-actuated. To
of weighted objectives that feature performance goals of the
adjust its position angle in simulation, the robot’s stabiliser
robot over discrete instances in time, e.g. maintaining torso
is controlled which subsequently affects the shank’s angle
angle, see equation 5. In addition, the problem is subject
due to kinematic and dynamic constraints. The respective
∈ R to non-linear equality and inequality constraints which are
nj actuated joint angles, are then denoted as qj nj. used to maintain stability with regard to the chosen stability
Followingthesenotations,theequationofmotionforAerobot
criteria and the robot’s physical limitations.
is denoted as:
M(q)q¨+h(q,q˙)=STτ +J(q)Tλ (4) minimize wTf(x,t) (5a)
x
∈ R × ∈
where M(q) nj+6 nj+6 is the mass matrix, h(q,q˙) subject to eq(x,t)=0, (5b)
R
nj+6 denoting the Coriolis, centrifugal and gravity terms,
∈R ∈R × ≤
τ nj+6 the torque vector, J(q) k nj+6 the Jacobian ineq(x,t) 0, (5c)
∈R
oanfdthSe ∈robRont’js+s6u×pnpjo+r6t,s,thkensuemlebcetironofmcaotnritxacwt fhoicrchesisλused tko, fkin(x,t)∈Ψ, (5d)
map under-actuation to a robot’s joints.
We simplify the dynamics model of Aerobot by only
where:
taking into account dynamics across its saggital plane. This
restrictsthemodelto2dimensions.Asaresult,theequations • f ∈Rp denotes the vector of objectives.
of motion in our model has 6 degrees of freedom, with 2 • f denotes the vector of joint position, velocity and
kin
used to denote the pitch angle of the shank’s underactuated acceleration, found via equations 7b, 8c and 8d.
DOF and it’s vertical height. The dynamic effects of the • w ∈Rp denotes the weight vector.
passive wheels are modelled as a simple point contact with • Ψ denotes the set that describes the kinematic limita-
no friction. The dynamic effects of the drive wheels are also tions of the robot.
simpliﬁed as a point contact that assumes no slipping. • t∈Rn is the time vector
Inverse dynamics is done using orthogonal decomposition In contrast to using Euler integration to calculate the
on its ﬂoating base dynamics [17] is realized from these time derivatives of the joints as in our previous work [4],
simpliﬁcations to instantiate the feed-forward terms of the aseventhordersplineisused.Sincethesecondderivativeof
inverse dynamics trajectory follower controller in our TO these splines are smooth, the motion plans are constrained
method. This 2D model is also leveraged in our TSID to have smooth accelerations, reducing the occurrence of
implementation. discontinuous torques.
1520
Authorized licensed use limited to: La Trobe University. Downloaded on September 21,2020 at 13:02:47 UTC from IEEE Xplore.  Restrictions apply. Usingthetimevectorinequation6a,splinecoefﬁcients,as Inequality:
presented in equa(cid:2)tion 6b, are used to calculate jo(cid:3)int position Stability requirements are satisﬁed through the use of
according to equation 6c
inequality constraints. To test the hypothesis presented in
(cid:2) (cid:3) this work, we formulate a general description that produces
Ω(t)= 1 t t2 t3 t4 t5 t6 t7 T (6a)
plansbasedonagivenstabilitycriterion.Sinceeachcriterion
a= a a a a a a a a T (6b) is based on the existence of a measurable quantity xs within
0 1 2 3 4(cid:2) 5 6 7 (cid:3) a set S, the support polygon. Stability for a given motion
q (t)=Ω(t)Ta (6c) plan with respect to the chosen criteria is met when
a
Given the solver variable x= aT bT cT dT eT T x ∈S for all i=1,2,...,n (11)
wherethevectorsb,c,dandearecoefﬁcientsuniquetoeach si i
of the robot’s joints, the full joint kinematics q(t) ∈ Rnj+2 For the ofﬂine motion planner in this section, xs =cx.
can be mathematically denoted with matrix notation as Objectives:
 
 
Ω(t)T 0 ×  Objectives are used to maximise the robot’s desired be-
 1 32 
0 × Ω(t)T 0 ×  haviour while transitioning between states. Since height
1 8 1 24
q(t)= 0 × Ω(t)T 0 × x adjustment is guaranteed via the equality constraints, we
(cid:124)01×16 Ω((cid:123)t(cid:122))T 01×16 (cid:125) (7a) need not seek position control of the robot’s COM.
1 24 1 8
0 × Ω(t)T To best resemble a human form, Aerobot’s torso ang→−le
1 32 ∈R
q n is desired to remain vertical, where q = 0
=T(t) torso torso
is upright and optimal.
q(t)=T(t)x (7b) Given the derivations made in section III, the ideal c
∈ R × ∈ R ×
number of COM accelerations x¨ n→−c,z¨ n c
The velocity 8c and acceleration 8d of the joints can then Gt Gt
should be minimised so that x¨ ,z¨ = 0. Since some
be derived t(cid:2)hrough using time vectors 8a and 8b.(cid:3) masses on the robot platform apGptearGtto contribute more to
∈ R
the instability of the robot, we use a weight vector, ξ c
(cid:2) (cid:3)
Ω˙(t)= 0 1 2t 3t2 4t3 5t4 6t5 7t6 T (8a) which penalises accelerations of a COM according to its
contribution on its inﬂuence on a robot’s ZMP.
Ω¨(t)= 0 0 2 6t 12t2 20t3 30t4 42t5 T (8b)
f =qT w q +(x¨ ξ )Tw x¨ ξ +
torso 1 torso Gt 1 2 Gt 1 (12)
q˙(t)=T˙(t)x (8c) (z¨ ξ )Tw z¨ ξ
Gt 2 3 Gt 2
∈R
q¨(t)=T¨(t)x (8d) where w1, w2, w3 are weights in the multi-objective
optimisation problem.
Thusatra(cid:2)jectory,q ,canbecalculatedatre(cid:3)gularstepsizes,
t
h, for n waypoints Inverse dynamics
− ∈R × Theinversedynamicscontrollerdescribedbelow,wasused
q = q(0) q(h) ... q((n 1)h) 5 n (9)
t to follow the trajectories from the TO generator.
where the same notation can be used for getting the trajec- Firstly, the actuated and under-actuated motion dynamics
tories for velocity and acceleration. of Aerobot are separated via ca(cid:20)lcu(cid:21)lation of the QR decom-
position of its contact Jacobian as done in [17].
Equality:
R
The cartesian acceleration x¨ =Jq¨+J˙q˙ is constrained JT =Q , (13)
c C 0
to zero to maintain consistent contact conﬁgurations over
the motion plan. The initial and ﬁnal joint poses, denoted where Q is an ortohogonal matrix (QQT = QTQ = I) and
∈ R ∈ R
by q m and q m respectively were constrained rank(R)=k. This leaves the below equation of motion for
0 n
to predeﬁned values. The initial state is chosen to be the the actuated joints which can be used to derive the control
default/currentposeoftherobot.Anoptimalﬁnalrobotpose, input for following a motion plan
(cid:2) (cid:3)
q is found by running an independent SQP solver which
n S QT(Mq¨+h)=S QTSTτ (14a)
determines a static pose that maximises the robot’s stability u u
and height adjustment. As a result, the motion optimisation S = 0 − × I − × − (14b)
seeks the optimal feasible path between two static poses, u (nj k) k (nj k) (nj k)
with equality constraints presented in equation 10 τ =(SuQTST)+SuQT[Mq¨d+h] (14c)
− −
q(0)−q =0, (10a) u=τ +P(q qd)+D(q˙ q˙d) (14d)
0
q((n−1)h)−qn =0 (10b) (Aw+he=reA((A)+ATi)n−d1ic)ataensdtqh¨e iMs tohoered-Peseinrerodsacpcseuleedroatiinovnersoef
d
the robot’s joints.
1521
Authorized licensed use limited to: La Trobe University. Downloaded on September 21,2020 at 13:02:47 UTC from IEEE Xplore.  Restrictions apply. where: perform feedback control to control a process value towards
• u is the control input. a set value.
• P and D are matrices representing proportional and This formulation is used to track the acceleration proﬁle
derivative feedback control gain, respectively. of a target optimal COM motion plan for height variation.
B. TSID VI. RESULTS
Our approach aims to ensure dynamic stability during A. Experiment setup
fast standing via the passive dynamic model discussed in The robot simulator, Gazebo [18], and the Robot Oper-
section IV. To perform standing we calculate a formal ating System (ROS) [19] were used to test the controllers.
optimalCOMverticalaccelerationproﬁlefortrackinginthe Motion plans were generated ofﬂine ﬁrst using MATLAB’s
controller. This controller is captured in the below optimisa- optimization toolbox where a SQP is accessed through the
∈R ×
tion problem which solves for the optimal state x 14 1, fmincon function. All computations were performed on a
Intel Core i5-2500 CPU with 4 cores running at 3.3 GHz.
1
minimize xTHx+fTx (15a) Data was captured at 1KHz for all experiments.
x=(q¨,τ,λ) 2 Fast trajectories were produced in the TO method, the
∈ ∈ R
subject to Bx=C, x Γ (15b) vector, t 10, was predeﬁned∈toRhave a short in-
∈R × terval with constant step size, h set to 100 ms.
whereΓisthesetoffeasiblesolvervariables.H 14 14 This enforced the robot to demonstrate standing and sit-
∈ R × ∈ R × (cid:2) (cid:3)
is the hessian, f 14 1 the linear term and B 8 14, ting with high accelerations at the robot’s joints. The
∈ R × (cid:2) (cid:3)
C 8 1 being constants to be determined by the state following control gains, as mentioned in equation 14d,
of the robot’s dynamics that are dependent on position and were the following P = diag( 60 75 40 40 40 ) and
velocity. D = diag( 55 55 33 35 35 ) for the stabiliser, thigh,
Position constraints of the robot’s joints were set by torso, left and right shoulder joints, respectively. The mean
constricting the acceleration of the robot’s joints as the joint solver time for the ofﬂine trajectories is 2940 ms. The feed-
limits were approached over a prediction horizon δt. This forward term, τ, reached update rates of up to 500Hz, while
constraint is implemented with reference to the quadratic the control loop is run at 1KHz for the TO experiment.
formula q =q +q˙ δt+1q¨δt2, where subscripts i, i+1 For the TSID controller, two optimal proﬁles for vertical
i+1 i i 2 s
and s denote the detected, predicted and solved kinematic COM motion plans are computed ofﬂine. This is done to
states, respectively. examine the behaviour of the controller under a decelerated
COM motion plan and an accelerated COM motion plan.
Equality:
To maximise stability, the horizontal position of the robot’s
The equality constraints are used to apply the full passive
COM is optimised to stay in the same position in agree-
dynamicmodelequationsasshowcasedinsectionIV.Given
ment with equation 2c. To balance between least-squares
theonlinekinematic(cid:20)statesofitsjointposition(cid:21)sandvelocities
objectives weights were implemented to assign priority over
the constants, B and C are the following
the execution of multiple tasks, which in this paper are the
− −
M(q)(cid:20) ST (cid:21)J(q)T horizontal and vertical COM accelerations. Tuning of the
B = Jc(q) 02×8 (16a) control gain values was carried out to encour(cid:2)age optim(cid:3)al
performance. MATLAB’s quadprog function was used to
− (cid:2) (cid:3)
h(q,q˙) solvetheQPproblems.Thecontrolgainsforthisexperiment
C = − (16b)
J˙c(q,q˙)q˙ as mentioned in equation 17b, were Kp = diag( 200 300 )
Objectives: and Kd = diag( 120 50 ) for the horizontal and vertical
(cid:107) − (cid:107) (cid:107) (cid:107) COM motion, respectively. On average, the solver times
Theregularisedleastsquaresproblem 1 Ax b 2+λ x 2 were 1.57 ms and 8.95 ms for the TSID and COM solvers,
2
is used to derive our quadr(cid:2)atic objecti(cid:3)ves. Thus, the hessian
respectively.
and linear term of the QP problem are the following:
A separate experiment was conducted to examine the
A= J 0 × (17a) robustness of the controllers to disturbances that are not
T 1 8
modelled. This was done by subjecting the robot’s hip to
−
b=a¨ +K e+K e˙ J˙ q˙ (17b) loads of up to 300 N while the robot is standing.
r p d T
H =ATA+λI (17c) B. Height variation using TO method
− Heightadjustmentwasdemonstratedsuccessfullywiththis
f = ATb (17d)
approach.Theheuristicusedforselectingweightsaddedthe
where J and J˙ are the jacobian and time-derivative most costs to COM accelerations of joints that accounted
T T
jacobian of the task space, respectively. I is an identity for most of the system’s weight distribution (kg). Due to
matrix and λ a weight. In addition the constants K and its human-inspired form, Aerobot has most of its mass
p
K are control gains which work with the same principal at its torso. As a result, the largest cost was applied on
d
as PD controllers where the error state, e and e˙ are used to the acceleration of its torso’s COM. Some of the robot’s
1522
Authorized licensed use limited to: La Trobe University. Downloaded on September 21,2020 at 13:02:47 UTC from IEEE Xplore.  Restrictions apply. (a) (b) (c)
(d) (e) (f)
Fig. 2. Time series data showing COM and ZMP trends from the simulations. Vertical dotted lines denote where the squatting motion for Aerobot
commences.Dynamicallystablestandingandsittingusing(a)TOmethodwithoptimisedCOMacceleration,(b)TSIDcontrollerand(c)TSIDcontroller
withhigherCOMaccelerationtrajectory.(d)-(f)ZMPandCOMtrendswhenunmodelledforceswereintroducedforeachofthecorrespondingexperiments
above.Cornerfrequenciesfc=980Hz,fc=500Hzandfc=100Hz,wereusedtoinalowpassﬁlterforq,q˙andq¨,respectively,inallexperiments.
components had a small amount of mass so the weights for performed by virtue of its capacity to react to the robot’s
them were reduced accordingly. This resulted in the ZMP immediatestatesquickly.Forinstance,itcanbeexecutedina
≥
trajectory presented in ﬁgure 2(a). In this case, we can see closedloopathighcontrolrates( 100Hz)tosolvefortorque
that the ZMP stays closer to the COM, promoting a more control inputs that re-balance the ground reaction forces at
stable height variation motion plan. This behaviour is not as its wheels to ensure dynamic stability. This is evident in
apparent when a disturbance is applied, see ﬁgure 2(d). our video where we demonstrate good disturbance rejection
capacitywhenAerobot’storsoissubjectedtolargeloadsthat
C. Height variation using TSID
are not modelled during its standing up procedure.
Results demonstrated successful variation of Aerobot’s Unwanted behaviours were also present under the TSID
height via tracking of an optimal COM trajectory. The control scheme that prompts future research. Given the
platform’s COM is seen to maintain good proximity with results achieved on the trajectory optimisation method im-
its initial position. However, there are a number of key plemented, a possible remedy may be realised via the use
differences in its performance when compared to the TO- of additional objectives for more sophisticated acceleration
based controller. The movement of the robot inherits more control which may include implementing additional regu-
jerk at the beginning of the height variation process which larization terms for tracking ideal joint level trajectories in
corresponds to more discontinuous ZMP behaviour around the regularized least squares QP problem or via including
its COM. In addition, the robot’s torso struggled to maintain torso orientation task objectives. Performances may also be
an upright conﬁguration of which is evident in this paper’s improved for both TO and TSID controllers by accelerating
accompanying video. Lastly, between the two COM motion their respective execution speeds.
planstested,therobot’sZMPﬂuctuatedaboutitsCOMwith
VIII. CONCLUSION
a higher magnitude when the faster ofﬂine COM trajectory
This research demonstrates motion planning for height
was utilised. This is also the case when unmodeled distur-
variation for an actively articulated wheeled humanoid robot
bances were introduced, see ﬁgure 2(e) and 2(f).
using theory that promotes fast motions predominantly ver-
VII. DISCUSSION tical or horizontal. SQP is leveraged to solve the trajectory
optimisation problem which stabilised the behaviour of the
Dynamic stability is seen to be maintained in experi-
robot’sZMPviaminimisationofitsCOMaccelerations.The
ment VI-B without causing wide ﬂuctuation of the robot’s
generated plan was then tracked using an inverse dynamics
ZMP. This addresses a common problem in the literature
controller. The study through this approach’s proves that
where upon random occurrences ampliﬁed by jerky control,
the platform is indeed capable of transitioning between
a robot’s ZMP can ﬁnd itself outside its constricted support
two extreme states rapidly while minimising the robot’s
region.Inanonlinecontrolscheme,thesubsequenttrajectory
overall COM horizontal acceleration for good agreement
optimization problem can become infeasible to solve as a
withthetheorypresentedinsectionIII.TheTSIDcontroller
result of this condition.
also demonstrates successful results in demonstrating height
The ZMP similarly remains in close proximity to the
variation on Aerobot. However, it is apparent that more
robot’s COM for slower motion plans in the TS inverse
sophisticated planning methods are required to ensure that
dynamicscontroller.Howeveritdidnotsatisfythecondition
the compulsory objectives required for good functioning of
needed for application of the linearised ZMP model due
the robot are met robustly. This is also the case if one is
to its behaviour, as shown in ﬁgure 2(c) when tasked with
to capitalise on the linearised ZMP models for dynamic
tracking high acceleration COM plans. Be that as it may,
movement showcased in section III.
due to constrictions placed on the ground reaction forces
(to be at least +30N) on the full passive dynamic model ACKNOWLEDGMENT
leveraged, dynamically stable height variation could still be This research is funded by the Irish Research Council.
1523
Authorized licensed use limited to: La Trobe University. Downloaded on September 21,2020 at 13:02:47 UTC from IEEE Xplore.  Restrictions apply. REFERENCES [11] A. Ames, J. Rogers, F. Hammond III, Y. Wardi, A. Thomaz et al.,
“Dynamichumanoidlocomotion:Hybridzerodynamicsbasedgaitop-
[1] H. Bae, I. Lee, T. Jung, and J.-H. Oh, “Walking-wheeling dual timizationviadirectcollocationmethods,”Ph.D.dissertation,Georgia
mode strategy for humanoid robot, drc-hubo+,” in 2016 IEEE/RSJ InstituteofTechnology,2016.
International Conference on Intelligent Robots and Systems (IROS). [12] S. Feng, X. Xinjilefu, C. G. Atkeson, and J. Kim, “Optimization
IEEE,2016,pp.1342–1348. basedcontrollerdesignandimplementationfortheatlasrobotinthe
[2] M.Bjelonic, C.D. Bellicoso,Y.de Viragh,D. Sako,F.D. Tresoldi, darparoboticschallengeﬁnals,”in2015IEEE-RAS15thInternational
F. Jenelten, and M. Hutter, “Keep rollin’-whole-body motion con- Conference on Humanoid Robots (Humanoids). IEEE, 2015, pp.
trol and planning for wheeled quadrupedal robots,” arXiv preprint 1028–1035.
arXiv:1809.03557,2018. [13] S.Faraji,S.Pouya,C.G.Atkeson,andA.J.Ijspeert,“Versatileand
[3] C. McGinn, M. F. Cullinan, M. Otubela, and K. Kelly, “Design of robust3dwalkingwithasimulatedhumanoidrobot(atlas):Amodel
aterrainadaptivewheeledrobotforhuman-orientatedenvironments,” predictivecontrolapproach,”in2014IEEEInternationalConference
AutonomousRobots,vol.43,no.1,pp.63–78,2019. onRoboticsandAutomation(ICRA). IEEE,2014,pp.1943–1950.
[4] M. Otubela, M. Cullinan, and C. McGinn, “Controlling aerobot: [14] K. Van Heerden, “Planning com trajectory with variable height and
Developmentofamotionplannerforanactivelyarticulatedwheeled foot position with reactive stepping for humanoid robots,” in 2015
humanoidrobot,”in2019IEEEinternationalconferenceonrobotics IEEEInternationalConferenceonRoboticsandAutomation(ICRA).
andautomation. IEEE,2019. IEEE,2015,pp.6275–6280.
[5] Y.deViragh,M.Bjelonic,C.D.Bellicoso,F.Jenelten,andM.Hutter, [15] C.Brasseur,A.Sherikov,C.Collette,D.Dimitrov,andP.-B.Wieber,
“Trajectoryoptimizationforwheeled-leggedquadrupedalrobotsusing “A robust linear mpc approach to online generation of 3d biped
linearized zmp constraints,” IEEE Robotics and Automation Letters, walking motion,” in 2015 IEEE-RAS 15th International Conference
2019. onHumanoidRobots(Humanoids). IEEE,2015,pp.595–601.
[6] M.Posa,C.Cantu,andR.Tedrake,“Adirectmethodfortrajectoryop- [16] A. W. Winkler, C. Mastalli, I. Havoutis, M. Focchi, D. G. Caldwell,
timizationofrigidbodiesthroughcontact,”TheInternationalJournal and C. Semini, “Planning and execution of dynamic whole-body
ofRoboticsResearch,vol.33,no.1,pp.69–81,2014. locomotionforahydraulicquadrupedonchallengingterrain,”in2015
[7] J.Reher,E.A.Cousineau,A.Hereid,C.M.Hubicki,andA.D.Ames, IEEEInternationalConferenceonRoboticsandAutomation(ICRA).
“Realizingdynamicandefﬁcientbipedallocomotiononthehumanoid IEEE,2015,pp.5148–5154.
robotdurus,”in2016IEEEInternationalConferenceonRoboticsand [17] M. Mistry, J. Buchli, and S. Schaal, “Inverse dynamics control of
Automation(ICRA). IEEE,2016,pp.1794–1801. ﬂoatingbasesystemsusingorthogonaldecomposition,”in2010IEEE
[8] E. Garcia, J. Estremera, and P. G. De Santos, “A classiﬁcation of international conference on robotics and automation. IEEE, 2010,
stability margins for walking robots,” Robotica, vol. 20, no. 6, pp. pp.3406–3412.
595–606,2002. [18] N. Koenig and A. Howard, “Design and use paradigms for gazebo,
[9] P.SardainandG.Bessonnet,“Forcesactingonabipedrobot.center anopen-sourcemulti-robotsimulator,”inIntelligentRobotsandSys-
ofpressure-zeromomentpoint,”IEEETransactionsonSystems,Man, tems, 2004.(IROS 2004). Proceedings. 2004 IEEE/RSJ International
and Cybernetics-Part A: Systems and Humans, vol. 34, no. 5, pp. Conferenceon,vol.3. IEEE,2004,pp.2149–2154.
630–637,2004. [19] M. Quigley, K. Conley, B. Gerkey, J. Faust, T. Foote, J. Leibs,
[10] J.ZicoKolterandA.Y.Ng,“Thestanfordlittledog:Alearningand R.Wheeler,andA.Ng,“Ros:anopen-sourcerobotoperatingsystem,”
rapid replanning approach to quadruped locomotion,” The Interna- vol.3,012009.
tionalJournalofRoboticsResearch,vol.30,no.2,pp.150–174,2011.
1524
Authorized licensed use limited to: La Trobe University. Downloaded on September 21,2020 at 13:02:47 UTC from IEEE Xplore.  Restrictions apply. 
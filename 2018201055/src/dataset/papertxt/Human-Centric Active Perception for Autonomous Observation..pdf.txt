2020 IEEE International Conference on Robotics and Automation (ICRA)
31 May - 31 August, 2020. Paris, France
Drone-aided Localization in LoRa IoT Networks
∗ ∗ ∗† ∗∗
Victor Delafontaine , Fabrizio Schiano , Member, IEEE, Giuseppe Cocco , Member, IEEE, Alexandru Rusu ,
∗
and Dario Floreano , Senior Member, IEEE
Abstract—BesidesbeingpartoftheInternetofThings(IoT),
drones can play a relevant role in it as enablers. The 3D
mobilityofUAVscanbeexploitedtoimprovenodelocalization
inIoTnetworksfor,e.g.,searchandrescueorgoodslocalization
and tracking. One of the widespread IoT communication
technologies is Long Range Wide Area Network (LoRaWAN),
whichallowsachievinglongcommunicationdistanceswithlow
power. In this work, we present a drone-aided localization
system for LoRa networks in which a UAV is used to improve
the estimation of a node’s location initially provided by the
network. We characterize the relevant parameters of the com-
munication system and use them to develop and test a search Fig.1. Systemsetup.
algorithm in a realistic simulated scenario. We then move to
the full implementation of a real system in which a drone
is seamlessly integrated into Swisscom’s LoRa network. The to other localization technologies. The localization of IoT
dronecoordinateswiththenetworkwithatwo-wayexchangeof
devices is of paramount importance for applications such
informationwhichresultsinanaccurateandfullyautonomous
as the tracking of goods or low-cost and energy-efﬁcient
localizationsystem.Theresultsobtainedinourﬁeldtestsshow
a ten-fold improvement in localization precision with respect emergency devices. Localization of IoT nodes is usually
to the estimation provided by the ﬁxed network. Up to our tackled by including a Global Navigation Satellite System
knowledge,thisistheﬁrsttimeaUAVissuccessfullyintegrated (GNSS) receiver and a wireless transmitter in the node to
in a LoRa network to improve its localization accuracy.
be localized. Despite their relatively low cost, including a
SUPPLEMENTARYMATERIAL GNSS receiver may be unacceptable for low-end-low-cost
devices. Moreover, as mentioned in [6], the relatively high
Supplementary video: https://youtu.be/7HQ6MxwWS4w
power consumption of the GNSS receiver greatly limits the
I. INTRODUCTION battery lifetime. An alternative to this is to localize the
nodebasedonthesignalstrengthreceivedatsomereference
The advent of the internet of things (IoT) represents
receiving stations, that are usually assumed to be ﬁxed [7],
a major paradigm shift in communications, allowing to
[8]. Using LoRa for this application could lead to a solution
interconnect billions of devices, from home appliances to
suited for low-power devices over long-range. Low-power
robotic systems [1] [2]. Several communication standards
networks (LPN) based on LoRa are already deployed in
and protocols have been proposed in the IoT context over
countriessuchasSwitzerlandandtheNetherlands.However,
the years, some targeting short-range wireless communi-
the localization accuracy achieved by ﬁxed LoRa networks
cation, such as Zigbee, near ﬁeld communication (NFC)
is not acceptable for speciﬁc applications (see Figure 1)1.
or Bluetooth [3], and others focusing on long-range com-
In the last years, the use of UAVs in communication
munication. Among these, a promising technology is the
networks has focused mostly on performance improvement
long-range communication protocol (LoRa) [4]. LoRa offers
in terms of coverage or to provide additional network ca-
both long-range communication and high energy-efﬁciency
pacity [1], [9], [10]. Apart from this, UAVs can be used
[5]. Such characteristics make it an appealing solution for
in the context of localization in IoT networks, acting as
battery-constrained IoT devices intended for outdoor use
3D-mobile gateway stations, with possible applications in
and deployed in remote areas. While LoRa technology was
search-and-rescue(e.g.,avalanchesorearthquakesscenarios)
originallydevelopedforcommunicationpurposes,ithasbeen
or goods tracking [11]. However, so far little research has
recently proven to be a valid energy-efﬁcient alternative
been done on the deployment of drones as mobile gateways
∗ in LoRa networks for localization applications [12] and
Laboratory of Intelligent Systems, Ecole Polytechnique Federale de
Lausanne,CH-1015Lausanne,Switzerland current research focuses on theoretical aspects or simulated
∗∗
† SwisscomIoT/5GInnovationLab,CH-1015Lausanne,Switzerland performance, with partial or no real-world implementations.
Information Theory and Coding Group, DTIC Department, Pompeu
Inthiswork,westudytheuseofUAVsasmobilegateways
FabraUniversity(UPF),Barcelona,Spain
Giuseppe Cocco has received funding by the postdoctoral fellowship
programme Beatriu de Pino´s, funded by the Secretary of Universities and 1As an example, the accuracy of the localization given by Swisscom’s
Research(GovernmentofCatalonia),andbytheEU-H2020RIAprogramme LPNnetworkinSwitzerlandisofapproximately300m,whichmaynotbe
undertheMSCgrantagreementsNo.751062(IF)andNo.801370. acceptablefor,e.g.,localizingapersontrappedunderanavalanche.
978-1-7281-7395-5/20/$31.00 ©2020 IEEE 286
Authorized licensed use limited to: University of New South Wales. Downloaded on September 20,2020 at 14:12:56 UTC from IEEE Xplore.  Restrictions apply. to improve localization in LoRa IoT networks. We start by perimentally and the received data. It has a generally good
experimentally deriving a statistical characterization of the accuracy,butistime-consuming,labor-intensiveandvulnera-
LoRa signal. The statistical model is then used to develop a ble to environmental dynamics, which makes it unsuited for
search algorithm with one drone using realistic propagation our scope [20]. In multilateration methods a curve linking
channel and UAV dynamics. The algorithm is then extended signal strength and distance is obtained experimentally [7].
to three drones in order to decrease the mission duration Measurementsofthesignalstrengthatdifferentlocationsare
whileachievingthesameprecision.Thesimulationsareﬁrst thenusedtoobtainanestimationoftheposition.Thismethod
implemented in MATLAB and then through Software In canbeappliedwithdifferentcommunicationtechnologies[7]
The Loop (SITL) simulations to test the feasibility of our such as Bluetooth [8] or WiFi.
approach. The proposed system has then been implemented The agility, speed and manoeuvrability of UAVs make
usingarealdroneasmobilegatewayandintegratingitwithin them suited for many IoT applications [22]. Their main
the existing Swisscom LoRa network. Our tests show that a limitationisthebatterylifetimethatrestrictstheapplications
dramatic improvement of more than one order of magnitude to relatively short time periods. Recently, the deployment
inlocalizationprecision(from300mto12m)canbeobtained of a local WiFi network using ﬁxed-wing drones has been
already with a single drone. Although using drones for proposed [23]. A combined application of LoRa and UAVs
target localization has already been proposed in literature was proposed for surveillance application in [12]. In the
[13] [14] [15], little work has been done to demonstrate its paper the authors study the possibility of deploying on-
practical feasibility, including the interface with an existing demand nodes embedded on a UAV for improving security
communication network. Up to our knowledge, this is the inintelligenttransportationsystems(ITS).Unlikethepresent
ﬁrst time that the feasibility of a drone-aided localization paper, in [12] LoRa is used with a communication purpose
system based on LoRa technology has been proven. rather than a localization one. One of the main advantages
Therestofthepaperisstructuredasfollows.InSectionII inusingdronesasmobilebasestations/gatewaysisthatthey
the state of the art is revised. In Section III we introduce canbedeployedon-demandandincreasingtheirnumbercan
the system model. Section IV contains the statistical char- increasetheefﬁciencyofthesystem[24],[25].In[24]itwas
acterization of the signal between the beaconing node and shown that a swarm deployed over a large area can localize
the mobile gateways. The search algorithm for one and a source faster than a single robot. Applying an extended
three UAVs based on the statistical model is presented in Kalman ﬁlter in a multiple robots setting can also allow to
SectionIV-E.SectionVcontainsthesimulationresultswhile determine their relative positions [25], [26].
the ﬁeld test results are reported in Section VI. Finally,
Section VII describes the conclusions and future works.
III. SYSTEMARCHITECTURE
II. RELATEDWORK
A. Baseline System
LoRa is a proprietary data communication technology
developed for IoT, which deﬁnes the so called LoRaPHY LetusconsideraLoRaWANnetworkcomposedofaLoRa
physical layer. LoRaPHY is proprietary and no ofﬁcial doc- IoT user node to be localized, a set of network gateways
umentationisavailable,althoughsomeofthekeyparameters andaLoRaWANserver.LoRaWANwasoriginallyconceived
can be derived empirically [16]2. Unlike the physical layer, as a communication network meant for user nodes to send
the medium access control (MAC) layer usually used with data messages to the gateways. Here, we use LoRaWAN
LoRa, called LoRa Wide-Area Network (LoRaWAN), is an to localize the user node by measuring the power received
openstandardandhasbeendevelopedbytheLoRaAlliance at the gateway stations, as detailed in the following. Upon
[17].OneofthereasonsforLoRapopularityandwidespread receivingamessagefromthenode,thegatewayaddsalayer
utilizationisthefactthatitnaturallyﬁtskeyIoTapplications ofmetadatabeforeforwardingittothenetworkserver.Such
characterized by energy-constrained nodes scattered over a metadata contains, among other information, an indicator
wide geographical area. For instance, a LoRaWAN network of the received signal strength, a timestamp indicating the
has a tested range of up to two kilometers in urban areas, reception time and the gateway ID. The message with the
capable of servicing 200k nodes in 100 square kilometers metadata is passed on to the LoRaWAN server which then
using 30 gateways [5]. Two AA batteries can give a device routes it to a backhaul server that stores the messages in
a battery life of two years in the case of small periodic a database. Note that, due to the broadcast nature of the
messages [18], [19]. wireless medium and the typical LoRa gateways locations,
Among the methods for node localization based on com- the same message is usually received by more than one
munication networks, those most related to the present work gateway. In such case the gateways (the location of which is
are multilateration and ﬁngerprinting [8], [20]3. Fingerprint- preciselyknown)actassensorsmeasuringthereceivedsignal
ing compares an existing map of signal data obtained ex- power level. At the backhaul server, the gateway ID and the
receivedpowerlevelindicatorareextractedfromeachofthe
2https://revspace.nl/DecodingLora gateways’messagesandmergedusingtheknownlocationof
3Although a time-based approach as in GPS or Galileo systems can in
thegateways.Inthiswayanestimationofthenode’slocation
principle work, this requires very high clock accuracy, which is typically
notavailableinIoTnetworksorrequirescostlynetworkupgrades[21]. can be obtained.
287
Authorized licensed use limited to: University of New South Wales. Downloaded on September 20,2020 at 14:12:56 UTC from IEEE Xplore.  Restrictions apply. B. Considered Setup parameter α in the deﬁnition of LFS assumes a value which
The accuracy of the network estimation is typically in the can be different (usually higher) than 2. Since not all of the
orderof300m,whichmightnotbesufﬁcientfortime-critical parameters are available from hardware data-sheets or from
applications.Toimprovetheestimation,weproposetousea LoRa documentation (which is not fully public), we carried
UAVasamobilegateway.TheUAVcarriesaLoRagateway, out several experiments to estimate them in a controlled
which receives the messages transmitted by the node, a environment in which both the distance and the relative
4G communication module, that relays the message with antenna orientation between the node and the gateway are
metadata to the LoRa server and receives commands from known. In ord(cid:16)er to h(cid:17)ave a clear view of the parameters to
thenetwork,andaGPSreceiver,whichisusedtolocalizethe be estimated, we rewrite Equation (1) as:
UAV and allow triangulation. Upon receiving the data from −
thedrone,theLoRaserverfusesthesewiththedataobtained PRX =log10 R1/b log10(a)+GTx+GR [dBW]+N, (2)
from the ﬁxed gateways in order to improve the initial where a and b are the unknown parameters that account for
networkestimation.Thesystemhasbeendesignedsothatthe transmit power, hardware losses and propagation losses.
UAVisseamlesslyintegratedintheLoRanetwork,i.e.,from
A. Received Power
the perspective of the LoRa server it is seen as an additional
gateway, which allows for smooth internetworking and data The received power is measured at the gateway in the
processing, while retaining all beneﬁts of a mobile gateway form of received signal strength indicator (RSSI). From this
which can be deployed on-demand where and when the and from the signal to noise ratio (SNR), also available at
need arises. Speciﬁcally, starting from the original network the receiver, the Estimated Sign(cid:16)al Power (ESP) as(cid:17)4 can be
estimation, the locations where the drone will perform the computed as:
measurements are calculated by the backhaul server and − −
transmitted to the drone as waypoints. Thanks to the fact ESP =RSSI 10log 1+10 (SNR/10) (3)
that the UAV can get closer to the beaconing node than the
AlthoughRSSIandESPhavedifferentdeﬁnitions(RSSIalso
ﬁxed LoRa gateways and to the spatial diversity achieved
includes the thermal noise at the receiver, ESP does not),
through mobility, the measurement precision increases and,
either of them can be used in Equation (2) to estimate the
consequently, the localization accuracy improves.
unknown parameters. In the following sections we charac-
ThespeciﬁcLoRamodulesweusedintheimplementation
terize the unknown parameters in Equation (2), namely the
part of the present work are a Gimasi Tuino One with a
antennagain,thenoisestatisticsandtheaandbcoefﬁcients.
LoRa module for the node, and the Multitech MultiConnect
Conduit, equipped with a LoRa module as well as built-in B. Antenna Gain Characterization
mobile internet connectivity, for the on-board gateway. The antenna radiation pattern has been experimentally
characterized. Measurements were made using different rel-
IV. SIGNALCHARACTERIZATIONANDSEARCH
ativepositionsofthereceiverwithrespecttothetransmitter.
ALGORITHMSDESIGN
During the measurements, the distance between the two
In order to derive the distance between the transmitting
devices was kept constant to isolate the impact of the
node and the receiving gateway from the received signal
antenna radiation pattern. The resulting radiation pattern is
power, the following expression (in logarithmic scale) for
omnidirectional in the horizontal plane while is directive in
the received power can be used [27]:
the vertical plane, with blind spots at the poles. A linear ﬁt
− −
PRX =PTX+GTx+GRx LFS LO+N [dBW] (1) for the angles under 60 degrees resulted in the overall gain
(cid:44) duetobothantennas,giveninEquation(4),wheretheangle
where LFS αlog10(4πR/λ), R being the transmitter- θ is in degrees. The coefﬁcients’ values are a = 0.5667
receiver distance and λ the communication wavelength, PTX and b = 1.38. These values are obtained uasningg the ESP,
is the transmitter’s power while LO takes into account other and thaengcorresponding values for the RSSI are close enough
losses such as those between the ampliﬁer and the antenna
to be considered as equal.
in both terminals. The terms GTx and GRx in Equation (1) − ·
represent the transmitter’s and receiver’s antenna gains, re- Gtot =GTx+GRx = (aang θ+bang) (4)
spectively. Such values depend on the speciﬁc antenna con-
C. Noise characterization
sidered and are, in general, a function of the direction from
Measurements were made with the transmitter (LoRa
which each terminal is seen from the other. The coefﬁcient
α in the deﬁnition of LFS takes into account the propagation node) located at the height of 10 meters from the ground,
whilethereceiver(LoRagateway)wasplacedontheground
environment and, in case of a free-space propagation, is
equal to 2. If all parameters are known and assuming the at distances in the range between 10 and 150 meters. The
measurements were made in a location characterized by
received power is measured at the gateway, an estimate
of the distance R can be obtained inverting Equation (1). tall buildings (around 20 meters) with a clear line-of-sight
between the devices. Several measures were taken for each
However, the presence of the multi-path propagation noise
N, makes the estimation of the distance more challenging. 4Typical ranges for the metadata that we encountered are [−100,−30]
Furthermore, unlike the free-space propagation case, the dBmfortheRSSIandESPand[5,10]fortheSNR.
288
Authorized licensed use limited to: University of New South Wales. Downloaded on September 20,2020 at 14:12:56 UTC from IEEE Xplore.  Restrictions apply. TABLEI
distance to average out the effect of noise. Note that the
FREE-SPACEPATHLOSSEXPONENTIALCOEFFICIENTS
propagationenvironmentofthetestshasingeneralanimpact
on the model and thus on the precision of the distance
a b
estimation during the operations. Since the ﬁnal tests with a ESP 0.1973 -0.0902
RSSI 0.2189 -0.0894
realdroneandLoRanodetobelocatedwereperformedina
differentpropagationenvironment(openﬁeld),themeasures
suffer from a model mismatch. However, as described in E. Search Algorithm
Section VI, our approach is robust under such mismatch, Thepropagationmodelpresentedpreviouslyinthissection
allowing us to achieve a ten-fold improvement with respect has been used to develop different search algorithms and
to the ﬁxed LoRa network. This is of great practical rele- compare them to ﬁnd a suitable one to be implemented on
vance since the operating environment could often not be the UAV. Notice that, since the focus of this work is not
known in advance and can differ signiﬁcantly from the one in the algorithm itself, we focused on a low complexity
where the propagation model was derived. We repeated the solution which is also robust against signal noise. Potential
characterization by using data collected on an open ﬁeld, improvements are discussed in Section VII.
whichfurtherimprovedtheresults.Afullcharacterizationof We considered two setups: one with one drone and one
all main propagation scenarios (e.g., urban, suburban, hilly withthreedrones.Ineachofthemwecomparedtwodifferent
terrain) is out of the scope of this work (see [9] for further approaches: in one the drones perform continuous measure-
details). No signiﬁcant correlation was observed between ments (later on transmitted to the server for multilateration)
distance and noise’s standard deviation, which was around 2 as they move along a predetermined trajectory while in
dBm. A normal ﬁt on the signal expressed in dB has been the second approach they make several measurements while
used, which is in line with the widely adopted lognormal hoveringinthesamelocationbeforemovingtothenextone,
fading model. The standard deviation used in the simulation inordertoaverageoutthenoise.Theﬁrstapproachremoves
is slightly larger than the one recorded (2.5 instead of 2) the need to hover for extended periods to collect data, at the
to account for the vibrations and movements of the drone, costofnoisiermeasurements.5.Agreedyalgorithmhasbeen
whichdependontheoperationalconditions(e.g.,winds)that consideredinbothcases.Ateachiteration,measurementsare
cannot be known in advance. made on a circle centered around the last estimated node
location. The circle radius is decreased at each iteration.
The circle radius is determined numerically, as explained in
D. Path loss characterization
next section. The choice of a circular sampling curve was
motivated by the circular symmetry of the problem which,
Let us now consider the a and b parameters in Equa-
inturn,comesfromthesymmetricantennaradiationpattern.
tion (2). The measured data were ﬁtted according to the
exponential curve shown in Figure 2. V. SIMULATIONRESULTS
In order to get an insight on the required ﬂight time and
estimation accuracy, the search algorithms were tested ﬁrst
throughMATLABsimulationsandtheninSITLsimulations
using the Gazebo simulator, ROS, and the PX4 ﬁrmware.
This allowed us to test our solutions at increasingly realistic
stepsbeforemovingtoareal-worldimplementation(seeSec-
tion VI). Thanks to these simulations we were able to tune
different parameters, such as the measurement circle radius,
that are discussed below. In the following subsections, four
different simulation setups are considered.
A. One UAV, discrete measurement method
Figure 3 shows an example of the discrete method. The
network estimation of the node position is the starting point
of our simulations. Our algorithm starts by setting three
locations on a circle centered in such estimation. The UAV
willthenvisitthesethreepositionsandperformLoRasignal
Fig.2. Exponentialcurve-ﬁttingofESPversusdistance.
measurements. The radius of the circles (red, blue, green)
pictured in Figure 3 correspond to the distance estimated
Since, as can be seen from Equation (2), the received using the power-distance model in Section IV. The radius
poweralsodependsontheantennagain,wecompensatedfor of the circle on which the three waypoints are deﬁned was
itusingthemodelderivedinsubsectionIV-B.Theestimated
5Anotheradvantageofmakingcontinuousmeasurementsisthatitcould
aandbcoefﬁcientsusingESPandRSSIofEquation(2)are
also be used for drones without hovering capabilities such as ﬁxed-wing
shown in Table I. drones
289
Authorized licensed use limited to: University of New South Wales. Downloaded on September 20,2020 at 14:12:56 UTC from IEEE Xplore.  Restrictions apply. Fig.3. Overviewofthediscretemeasurementmethod.Ateachmeasure- Fig.4. Overviewofthecontinuousmeasurementmethod.
ment iteration, the radius of the circle where the measurement points are
locateddecreases.
smaller while the same accuracy is achieved. We performed
simulationswiththesameparametersofSectionV-Aandwe
set considering the initial network accuracy and optimized
hadthesameﬁnalprecision,asexpected,butinhalfthetime7
numerically tacking the signal model into account. After
this ﬁrst iteration, a new estimation of the node location is (between 2 and 3 minutes). Since this method requires a
shorterﬂighttime,thiscanbetradedwithincreasedaccuracy
obtained. The UAV starts a new measurement iteration, in
in two ways. The ﬁrst one is to make more measurements
which the initial network estimate is replaced with the new
at each measuring position. This allows to average out the
one. The radius of the circle where the three measurements
signalnoiseandleadtobetterdistanceestimates.Thesecond
are made is determined numerically taking the noise vari-
option is to add more trilateration iterations centered on
ance into account, decreasing at each iteration to improve
the best estimate provided at the end of each iteration. A
accuracy. With the continuous method an average precision
comparison of the different methods is shown in Table II.
of 5.4m was achieved in a time between 4 and 6 minutes.
As expected, the larger the number of iterations or measure-
B. One UAV, continuous measurement method ments, the better the result.
Figure 4 describes the continuous measurement method
TABLEII
withoneUAV.Similarlytothediscreteversion,theradiusof
CHANGEINPRECISIONANDFLIGHTTIMEWHENINCREASINGTHE
thecircleonwhichthemeasurementsaredoneisdetermined
NUMBEROFITERATIONS(ORNUMBEROFMEASUREMENTS)ATEACH
numerically and decreases at each measurement round. The
MEASURINGPOSITION.
precision reached was 8.2 m in a time between 7 and 8
minutes.Here,unlikethediscretemethod,measurementsare Iterations Measurements Precision[m] FlightTime[s]
made while the drone is moving rather than hovering in a 2 2 4.1(ref) 175(ref)
2 4 2.6(-36%) 268(+53%)
ﬁxed position. The UAV was set to ﬂy at lower speed than
3 2 3.2(-22%) 225(+28%)
in the discrete method (hence the longer time) to reduce the 3 4 2.3(-44%) 360(+105%)
combined effect of the on-board antenna tilt due to drone’s
pitch and the antenna’s directivity6. An advantage of this
D. Three UAVs, continuous measurement method
method over the discrete one is that the server can do the
Similarly to what described in Section V-C, we can use
multilaterationbeforetheUAVreachesitsﬁnalmeasurement
the method described in Section V-B with three UAVs. In
location. This could be of vital importance in search-and-
this case each UAV follows a circular trajectory which is
rescuescenarioswhereaﬁrstroughpositionestimationmust
centred around its measuring positions. The three measuring
be provided as fast as possible.
positions are located on a circle centered on the network
C. Three UAVs, discrete measurement method estimation. The algorithm performs two main iterations. In
the ﬁrst one the radius of the circle centered in the network
The same method described in Section V-A has been
testedusingthreedrones.Onlyoneofthethreemeasurement estimate was set to 80m while the orbiting radius of each
positions is assigned to each drone. Since each UAV needs UAV was set at 70m. In the second iteration the radius of
the circle centered on the estimate of the ﬁrst iteration is
tovisitonlyonepoint,thetimetoaccomplishthemissionis
set to 50m while the orbiting radius of each UAV was set to
6Anincreaseinthedrones’speedwouldreducetheacquisitiontime,but
alsomakeeitherthemeasurementsmorenoisyorincreasethecomplexity 7Note that the time is not one third of the single-drone case due to the
ofthetriangulationalgorithmtotake,e.g.,drone’spitchintoaccount. initialtimeneededtogettotheinitialmeasurementposition.
290
Authorized licensed use limited to: University of New South Wales. Downloaded on September 20,2020 at 14:12:56 UTC from IEEE Xplore.  Restrictions apply. 30m.Withtheseparameterswereachedanaverageprecision rather than an exponential ﬁt in the distance-strength curves
around 8.5 m in 5 minutes and 20 seconds of ﬂight (the has been performed, leading to a lower error. A new ﬂight
average is taken across simulations). testwasdoneusingthecomputationoftheprecisionbasedon
the new propagation model. The localization accuracy using
VI. EXPERIMENTALRESULTS the discrete method had an improvement of 83% (from 48.4
To prove the feasibility and the validity of our approach to 8 meters) and 70% for the continuous one (from 28.7 to
weimplementedthesystemdescribedsofarusingoneUAV, 8.6 meters). This shows that having a signal model adapted
shown in the attached video, and the algorithms presented totheﬂightenvironmentcanfurtherimprovethelocalization
in Sections V-A and V-B. The drone was equipped with accuracy of the proposed system.
a PixHawk ﬂight controller (running the PX4 autopilot), a
GPSmodule,aRaspberryPi3B+onboardcomputer(running VII. CONCLUSIONSANDFUTUREWORK
ROSandMAVROS),andaMultiTechMultiConnectConduit We designed, implemented and tested a drone-aided sys-
LoRa gateway. The connection between the RPi and the tem to improve localization in LoRa IoT networks. We per-
Swisscom server was established through a Huawei E3372 formed a measurement campaign to statistically characterize
USB modem also mounted onboard. In the experiments the the dependency of the distance on the received power. The
server acted as coordinator, receiving the LoRa messages model was then used to design a search algorithm involving
transmitted from the emitting node and forwarded (with the one and three drones, later on tested through MATLAB and
additional metadata) by the different gateways, and storing SITL simulations. We then moved to a full implementation
them in a database. In addition to the ﬁxed gateways, the of the system. This involved the realization of a quadrotor
UAV also sends information on its coordinates and ancillary capable of carrying the required hardware, the implemen-
parameters. We differentiated the two types of messages tation of a software interface to allow the drone to interact
based on unique identiﬁers for the UAV and for the LoRa withtheSwisscomLoRanetworklocatedinSwitzerland,the
ﬁxed gateways. The result is a dataset, containing both extractionofmetadataattheLoRaserverandtheclosed-loop
positionofeachreceiverandmeasuredsignalstrengthinfor- communication between the central server, where the de-
mation of the LoRa node’s signal, on which multilateration signed algorithm was running, and the drone. We performed
canbedone.Then,theservercomputesthewaypointsbased a ﬂight test campaigns in which a LoRa node was localized
on the latest position estimation according to the algorithm using the developed UAV and the Swisscom LoRaWAN
prsented in previous section. A GUI was created using the network. Our test results showed a ten-fold improvement
Google Maps API to have a real-time feedback and control in the localization precision with respect to the LoRaWAN-
on the UAV ﬂight as well as the position and waypoints only system from 300 m to around 30 m in the worst case
computed by the server (see attached video). scenario, i.e., using a propagation model ﬁtted with data
We performed different ﬂight tests, obtaining a precision from a different propagation environment than the test one.
between 16m and 48m with only one measurement itera- In the best case scenario in which a similar environment
tion and one UAV and using the parameters presented in was used for the model ﬁtting and the test, a precision of
Sections V-A and V-B. The continuous method returned around12mwasachieved.Thisencouragingresultshowsthe
better results (precision average of 27m) than the discrete great potential of UAVs as mobile gateways to signiﬁcantly
one (precision average of 40m). The reason for this is that improvethelocalizationaccuracyofexistingﬁxednetworks.
the LoRa transmission has a time period of 4s. During a Potential applications of the proposed scheme range from
continuous ﬂight of around two minutes, a total of 30 LoRa searchandrescuemissionstoon-demandgoodstrackingand
messagesareemittedbythebeacon,buttheaveragenumber localization.Uptoourknowledge,thisistheﬁrsttimeaUAV
of multilateration datapoints reeceived was around 20, i.e., hasbeensuccessfullytestedasamobilegatewaytoimprove
about one third of the total datapoints were lost due to localization in LoRA networks.
synchronization issues. In the discrete case the UAV should As future research directions, an interesting possibility
hover for around 40s in each measurement location to avoid is to use an extended Kalman ﬁlter to further improve
such issues, which would double the ﬂight time for each the localization accuracy [25], [28]. This could allow to
iteration. While the obtained precision is already a ten-fold includetheadditionalinformationfromtheantennaradiation
improvement over the one obtained from the LPN network, diagram (e.g., the presence of a blind spot) in the search
the accuracy can be further enhanced. In the ﬁrst place, algorithm. From the perspective of UAV path and waypoints
in the experiments we used the exponential ﬁt described calculation, this could be implemented using real-time tra-
in Section IV, which was obtained from data collected in a jectoryoptimizationforlocalizationasin[29].Also,tomake
urban scenario while the experiments were done in an open the localization more robust it would be interesting to make
ﬁeld. The statistical mismatch is responsible for part of the the localization algorithm dependent on the environment
residual localization error. To conﬁrm this, we improved our in which the system is deployed. Finally, in the multi-
ﬁtbydoingnewmeasurementsdirectlyfromthedroneandin drone scenario, machine-to-machine (M2M) communication
anopenﬁeld(inadifferentlocationfromtheoneusedinthe betweentheUAVs(possiblyusingthesameLoRamoduleto
tests). In addition, the antenna gain described in Section IV- reduce on-board weight) could help in case communication
B has also been taken into account. Furthermore, a linear ﬁt with the server is lost.
291
Authorized licensed use limited to: University of New South Wales. Downloaded on September 20,2020 at 14:12:56 UTC from IEEE Xplore.  Restrictions apply. REFERENCES [14] Y. Liu and Y. Shen, “UAV-aided high-accuracy relative localization
of ground vehicles,” in IEEE Int’l Conf. on Communications (ICC),
[1] M. Mozaffari, W. Saad, M. Bennis, and M. Debbah, “Mobile Un-
KansasCity,MO,USA,2018.
manned Aerial Vehicles (UAVs) for Energy-Efﬁcient Internet of
[15] J.Jiang,G.Han,H.Xu,L.Shu,andM.Guizani,“LMAT:Localization
Things Communications,” IEEE Trans. Wireless Commun. Mag.,
with a mobile anchor node based on trilateration in wireless sensor
vol.16,no.11,pp.7574–7589,2017.
networks,”inIEEEGlobalTelecommunicationsConference,Houston,
[2] A. Al-Fuqaha, M. Guizani, M. Mohammadi, M. Aledhari, and
TX,USA,USA,Dec.5-92011.
M. Ayyash, “Internet of things: A survey on enabling technologies,
[16] A.Augustin,J.Yi,T.Clausen,andW.Townsley,“AstudyofLoRa:
protocols,andapplications,”IEEECommunicationsSurveysTutorials,
Longrange&lowpowernetworksfortheinternetofthings,”Sensors,
vol.17,no.4,pp.2347–2376,2015.
vol.16,no.9,p.1466,2016.
[3] J. Gubbi, R. Buyya, S. Marusic, and M. Palaniswami, “Internet of
[17] LoRa Alliance, https://lora-alliance.org/, [Online; accessed April
things(IoT):Avision,architecturalelements,andfuturedirections,”
2019].
Future generation computer systems, vol. 29, no. 7, pp. 1645–1660,
[18] M.C.Bor,J.Vidler,andU.Roedig,“LoRafortheinternetofthings.”
2013.
inEWSN,vol.16,2016,pp.361–366.
[4] LoRa Alliance, “White paper: A technical overview of LoRa and
[19] F. Adelantado, X. Vilajosana, P. Tuset-Peiro, B. Martinez, J. Melia-
LoRaWAN,” The LoRa Alliance: San Ramon, CA, USA, pp. 7–11,
Segui, and T. Watteyne, “Understanding the limits of LoRaWAN,”
2015.
IEEECommunicationsmagazine,vol.55,no.9,pp.34–40,2017.
[5] M.Centenaro,L.Vangelista,A.Zanella,andM.Zorzi,“Long-range
[20] Z.Yang,C.Wu,andY.Liu,“Locatinginﬁngerprintspace:wireless
communicationsinunlicensedbands:TherisingstarsintheIoTand
indoor localization with little human intervention,” MobiCom’12,
smartcityscenarios,”IEEEWirelessCommunications,vol.23,no.5,
Istanbul,2012.
pp.60–67,2016.
[21] A. Restrepo-Zea, M. Se´ne´clauze, and J.-D. Decotignie, “Iot objects
[6] B.C.FargasandM.N.Petersen,“GPS-freegeolocationusinglorain
localizationbasedontimedifferenceofarrivalmeasurements,”Swiss
low-power WANs,” in IEEE Global internet of things summit, 2017,
Center for Electronics and Microtechnology (CSEM), Tech. Rep.,
pp.1–6.
2016.
[7] C. Alippi and G. Vanini, “A RSSI-based and calibrated centralized
[22] A. Fotouhi, M. Ding, and M. Hassan, “Understanding autonomous
localizationtechniqueforwirelesssensornetworks,”inFourthAnnual
dronemaneuverabilityforIoTapplications,”in2017IEEE18thInter-
IEEEInternationalConferenceonPervasiveComputingandCommu-
nationalSymposiumonAWorldofWireless,MobileandMultimedia
nicationsWorkshops,2006.
Networks(WoWMoM). IEEE,2017,pp.1–6.
[8] Y. Wang, X. Yang, Y. Zhao, Y. Liu, and L. Cuthbert, “Bluetooth
[23] S.Rosati,B.Rimoldi,K.Kruzelecki,D.Floreano,J.-C.Zuffereyetal.,
positioning using RSSI and triangulation methods,” in 2013 IEEE
“Testbed for fast-deployable ﬂying WiFi networks,” in 4th Nordic
10thConsumerCommunicationsandNetworkingConference(CCNC).
workshoponsystemandnetworkoptimizationforwireless,2013.
IEEE,2013,pp.837–842.
[24] A.T.Hayes,A.Martinoli,andR.M.Goodman,“Swarmroboticodor
[9] V.A.Dambal,S.Mohadikar,A.Kumbhar,andI.Guvenc,“Improving
localization,” in IEEE/RSJ International Conference on Intelligent
lorasignalcoverageinurbanandsub-urbanenvironmentswithuavs,”
RobotsandSystems,vol.2,2001,pp.1073–1078.
inInternationalWorkshoponAntennaTechnology(iWAT),Miami,FL
[25] R. Madhavan, K. Fregene, and L. E. Parker, “Distributed heteroge-
(U.S.A.),2019.
neous outdoor multi-robot localization,” in IEEE International Con-
[10] M. Alzenad, A. El-Keyi, F. Lagum, and H. Yanikomeroglu, “3-d
ferenceonRoboticsandAutomation,vol.1. IEEE,2002,pp.374–381.
placement of an unmanned aerial vehicle base station (uav-bs) for
[26] F. Schiano and R. Tron, “The dynamic bearing observability matrix
energy-efﬁcient maximal coverage,” IEEE Wireless Communications
nonlinear observability and estimation for multi-agent systems,” in
Letters,vol.6,no.4,pp.434–437,2017.
IEEEInternationalConferenceonRoboticsandAutomation(ICRA),
[11] D. J. Pack, P. DeLima, G. J. Toussaint, and G. York, “Cooperative
2018,pp.1–8.
control of uavs for localization of intermittently emitting mobile
[27] G.MaralandM.Bousquet,SatelliteCommunicationsSystems. Wiley,
targets,” IEEE Transactions on Systems, Man, and Cybernetics, Part
2002.
B(Cybernetics),vol.39,no.4,pp.959–970,2009.
[28] A. Giannitrapani, N. Ceccarelli, F. Scortecci, and A. Garulli, “Com-
[12] V. Sharma, I. You, G. Pau, M. Collotta, J. Lim, and J. Kim,
parison of EKF and UKF for spacecraft localization via angle mea-
“LoRaWAN-based energy-efﬁcient surveillance by drones for intel-
surements,”IEEETransactionsonaerospaceandelectronicsystems,
ligenttransportationsystems,”Energies,vol.11,no.3,p.573,2018.
vol.47,no.1,pp.75–84,2011.
[13] Z. Gong, C. Li, F. Jiang, R. Su, R. Venkatesan, C. Meng, S. Han,
[29] S. Ponda, R. Kolacinski, and E. Frazzoli, “Trajectory optimization
Y.Zhang,S.Liu,andK.Hao,“Design,analysis,andﬁeldtestingof
fortargetlocalizationusingsmallunmannedaerialvehicles,”inAIAA
aninnovativedrone-assistedzero-conﬁgurationlocalizationframework
guidance,navigation,andcontrolconference,2009,p.6015.
forwirelesssensornetworks,”IEEETrans.onVehicularTechnology,
vol.66,no.11,pp.10322–10335,Nov.2017.
292
Authorized licensed use limited to: University of New South Wales. Downloaded on September 20,2020 at 14:12:56 UTC from IEEE Xplore.  Restrictions apply. 
2020 IEEE International Conference on Robotics and Automation (ICRA)
31 May - 31 August, 2020. Paris, France
Learning error models for graph SLAM
Christophe Reymann1 and Simon Lacroix1
Abstract—Followingrecentdevelopments,thispaperinvesti- or information matrix. Computing the utility of new obser-
gates the possibility to predict uncertainty models for monocu- vations is done by using the current model as prior, and
largraphSLAMusingtopologicalfeaturesoftheproblem.An
predictingtheeffectonthemodelbycomputingtheposterior
architecture to learn relative (i.e. inter-keyframe) uncertainty
distribution after the integration of the new observations. In
models using the resistance distance in the covisibility graph
ispresented.Theproposedarchitectureisappliedtosimulated general, this is an intractable problem and therefore several
UAVcoveragepathplanningtrajectoriesandananalysisofthe approximations have to bemade, such as assuming isotropic
approaches strengths and shortcomings is provided. Gaussian noise and using a simple ﬁxed-variance model for
unknown locations.
I. INTRODUCTION Numerous issues hinder the precise computation of un-
We are aiming at developing an active mapping scheme certainties. Indeed the uncertainties produced by the SLAM
in the context of large crop monitoring missions, or more algorithms in real world scenarios are often optimistic: this
generallyforsurfacecoveragemissionswithUAVs.Planning is due to imprecisions and simpliﬁcations in the observation
and adapting observation trajectories requires two abilities: models, such as unmodeled correlations between observa-
compute a world model online, and estimate an associated tions of the same landmark (e.g. due to sensor calibration
error model from which the information content of future biases) and outliers. Some of these issues have been ad-
trajectories can be assessed. dressed in the literature, as in [20] for EKF, where adap-
The current operational solution for coverage mapping tively “inﬂating” the prior uncertainty matrices with some
with UAVs is to feed a bundle adjustment (BA) technique hand-tuned parameters, and replacing EKF updates with a
with images acquired by an on-board camera: this requires covarianceintersectiontechniquethatintegratesacorrelation
heavy post-processing. Progresses in visual SLAM, and in factor between measurements to lead to more conservative
particular in monocular graph SLAM approaches [19], [14], estimates.
let seriously consider the possibility to achieve on-line map- Probabilistic reasoning on topological maps introduced in
ping with a precision comparable to off-line BA techniques. [17], [18] has shown to be helpful to maintain the global
Relyingonsuchamappingtechnique,onecandevelopactive consistency of the graph and close loops. Active SLAM
SLAM schemes, for which both an estimation and predictive planning on topological maps has been developed [13],
error models are keys. Yet, deﬁning such models remains reasoning on the entropy of the produced topological graph.
a difﬁcult problem, especially for graph SLAM approaches, More recently, [12] proposes to plan on reasoning on the
where the extraction of a precise information matrix from topological properties of the factor graph produced by the
the result of the optimization process is not straightforward. SLAMalgorithm.Itexploitstherecentﬁndingsof[10],[11],
This paper introduces an approach to learn a SLAM that state that the topological properties of the factor graph
error model that explicits the errors on all the relative pose is determinant of the accuracy of the estimation. It avoids
estimates of a Graph SLAM approach, so as to yield active any Bayesian reasoning, and the developed criteria depends
information gathering strategies. Building on the seminal only of the degree of the vertices is very easy to compute.
work of [9], we propose an architecture to learn relative Theseminalworkof[9]explorestherelationshipbetween
error metrics between any pair of keyframes. The input of pose graph topology and the uncertainty estimate recovered
thelearningarchitectureisasetofsignaturesofthestructure fromtheinformationmatrixofthemaximumlikelihoodesti-
ofthecovisibilitygraphmaintainedbytheSLAMalgorithm, mateinthe2DposegraphSLAMproblem.Reasoningonthe
as well as features computed from statistics on each edge of pose graph, with weight on edges taken as the measurement
the graph. This error model also yields a prediction ability: translation and rotational covariance, the authors ﬁnd three
new observations features can be inferred by a regression interestingindicatorslinkinggraphtopologywiththeSLAM
technique,fromwhichcovariancematricescanbepredicted. information matrix. In particular, the weighted number of
spanning trees is linked to the volume of conﬁdence el-
II. RELATEDWORK lipsoids through the determinant of the Fisher information
All active SLAM approaches have in common the need matrix. It is shown in [11] that the determinant converges
to compute the utility of an action, which has to rely to a pure function of the weighted number of spanning
on an uncertainty model of the robot pose and of the trees when a parameter δ converges to zero. This parameter
environment [1], [3], [2]. Fortunately, both Kalman ﬁlter depends only on the degree of the vertices, the sensing
and graph optimization based approaches share the property range and the precision of translation measurements. These
of being probabilistic frameworks and therefore maintain a resultsareproveninthecaseofplanarSLAM,andempirical
representation of uncertainty, in the form of a covariance evidences seem to indicate a linear relationship between the
logdeterminantoftheFisherinformationmatrixandthetree
1 LAAS-CNRS,Universite´ deToulouse,CNRS,Toulouse,France connectivity for 3D pose graph SLAM.
978-1-7281-7395-5/20/$31.00 ©2020 IEEE 1121
Authorized licensed use limited to: Heriot-Watt University. Downloaded on September 21,2020 at 05:05:41 UTC from IEEE Xplore.  Restrictions apply. The results of this work are highly effective when dealing α weights: we propose an architecture that enables the
with pose graph SLAM with an accurate error model on learning of these weights from errors measured with respect
the relative error measurements. However in the case of to the ground truth positions.
feature based SLAM with indirect measurements, such as in Khossoussi shows that the structure of the covisibility
monocular SLAM, this information is not directly available graphiscorrelatedtothevolumeoftheuncertaintyellipsoids
– and applying this approach to the full graph of poses and through the (weighted) number of spanning trees in the
landmarks is not possible, this graph being several orders of graph. The resistance distance measure is a well grounded
magnitude larger than a pose graph. measure, used in various contexts such as Markov chains
and networking problems (for a primer on graph resistance
III. LEARNINGTHESLAMERRORMODEL
distance see [6], [5]). We postulate that the resistance dis-
In our UAV coverage context, we use a SLAM solution tance between two vertices in the covisibility graph G is
α
that exploits a landmark-based graphical model formulation correlated to the relative error between the estimate of the
solved by MAP estimation [14]. Landmarks are key points corresponding keyframes.
features that are tracked in the images, and a keyframe Theresistancedistancecanbecomputeddirectlyfromthe
selectionprocessselectstheimageswhichpositionconstitute weightedLaplacianmatrixL ,orconductancematrix,ofthe
α
vertices in the factor graph. The estimation of the locations graph G :
α
of landmarks and keyframes is posed as a non-linear least
L =Adiag(α)AT (1)
square problem, and solved by an optimization method. α
R ×
whereA∈ n mistheincidencematrixofGanddiag(α)∈
A. The covisibility pose graph R ×
m m is the diagonal matrix composed from the edges
The landmark based graphical model formulation of weights, also called conductances.
monocular SLAM builds a bipartite factor graph. Vertices Let Γ be the Moore-Penrose pseudoinverse of L . The
α α
either represent keyframe poses or landmark positions (Fig. effective resistance distance between vertices i and j can be
1),andfactorsencodethereprojectionerrorontheimageof computed using:
landmarks,giventhedetectedpositionofthelandmarkinthe
image, the estimated pose of the camera and the estimated R =(Γ ) +(Γ ) −2(Γ ) (2)
ij α ii α jj α ij
position of the landmark.
The usage of the pseudoinverse in this deﬁnition allows for
WecallcovisibilitygraphtheundirectedgraphG derived
α more robustness to ill-conditioning of the L matrix.
fromthefactorgraph,keepingonlythecameraposevertices α
Asitsnamedenotes,theresistancedistanceRisadistance
andaddingedgesbetweentwoverticesiftheysharecovisible
function, and therefore deﬁnes a metric on G . Intuitively,
landmarks(Fig.1).Eachedge(i,j)hasaweightα ,which α
ij R is small when there are many paths between vertices i
represents the tightness of the constraints linking i and j ij
and j with high conductance, and high when there are few
camera poses.
paths with low conductance. Adding a new edge, i.e. a new
This covisibility graph is used in [14] to prune redundant
edge always lowers the resistance distance between vertices.
observations while keeping the global topology intact, to
Thus it behaves as is expected of a relative error measure
select edges involved in local optimizations when adding a
in SLAM: adding new measurements linking robot poses
new keyframe, and to deﬁne the “essential graph” on which
always lowers their relative localization error. Increasing the
optimization is performed when closing loops.
uncertainty of relative measures, thus decreasing the amount
of information it encodes, increases the error.
C. Learning the relative error with the resistance distance
i αij j The resistance distance seems an interesting proxy for the
relative error between vertices. To exploit it to precisely
estimate errors, two questions must be answered: How to
compute the weights α? How to derive the relative error
l l
1 2 from the resistance distance?
Weproposeanarchitecturethatcombinesneuralnetworks
with the resistance distance to estimate the relative errors
Fig.1. Afulllandmark-poseconstraintgraphandtheassociatedcovisibility
graph. correspond to camera poses, and to landmark positions. from the full graphical representation of SLAM, illustrated
All edges deﬁne the factor graph, whereas only solid edges deﬁne the Fig. 2. The process consists of the following four steps:
covisibilitygraph(landmarksarenotpartofthecovisibilitygraph).
1) From two keyframes i,j that share covisible landmarks
B. The resistance distance (i.e. an edge of the covisibility graph G ), we extract a
α
Relying on and expanding Khossoussi’s work, we aim at feature vector X that encodes how well the two keyframes
ij
instantiating the covisibility graph G so as to derive un- would be colocalized from the matched landmarks.
α
certainty estimates between any keyframe poses. In order to 2) We learn a function f mapping features to the weight
exploitthisgraphtoplanfurtherobservations,theuncertainty edges of G .
α
estimatesmustbeascloseaspossibletotheactualerror,and 3)FromG wecomputetheresistancedistanceR between
α kl
the graph must yield the possibility to assess the impact of any pair of vertices (k,l)∈V (be they connected by edges
future observations. The challenge is to generate meaningful in G or not).
α
1122
Authorized licensed use limited to: Heriot-Watt University. Downloaded on September 21,2020 at 05:05:41 UTC from IEEE Xplore.  Restrictions apply. 4) Then a second learned function g maps the resistance 6 pose parameters. Following the results and observations
distance R to the relative error metric eˆ . of [8], we can however hope to learn synthetic information
kl kl
Ifneededwindependentmetricscanbelearnedinparallel about the pose uncertainty ellipsoids.
by using w outputs for f and inputs for g, thus computing Because we can not differentiate the dimensions, we aim
the resistance distance on independent G ···G graphs. at learning the norm of the position error, not modeling the
α0 αw
rotationalerror.Letp¯ bethegroundtruthpositionforvertex
k
k, and pˆ the SLAM position estimate for the same vertex.
k
We deﬁne the relative positional error norm as:
α0 R (Rkl)0
Xij f (R ) g eˆkl e¯ =(cid:107)(pˆ −pˆ)−(p¯ −p¯)(cid:107) (3)
α kl 1 kl k l k l
1
R The probabilities of the relative errors are supposed inde-
(i,j)∈E (k,l)∈V2 pendentofeachothergiventhemodel,thereforeforngraph
samples with m vertices, we can write the joint probability
Fig.2. ArchitectureofthefunctioncomputingtheSLAMerrorestimate of the concatenated err(cid:89)or v(cid:89)ector e(cid:89)¯ given the model:
∈
etαˆok0lt.h.1feofrcroo(vkmi,siltb)hielitfyeVagt2ura.rpeαhv0eG..c1t=oarrs(eVXt,hiEje)∈le.aTRrhnkee,dfRuenkdclgteicoonwmefpiguchtoetmsvapeucsttceoasrlsathraesvsawolueciiegathfeotdsr p(e¯|θ,X)= n mi−1 mi p(e¯ |θ,X ) (4)
any two vertices in Gα, and g transforms the output of Rkl in a relative ikl i
errormetricbetweenverticesk andl. i=1 k=1 l=k+1
withθthemodelparameters(inourcasethenetworkweights
Because the resistance distance is differentiable, we can
of f and g) and X the feature vector corresponding to ¯e.
learn f and g together using neural networks. We simply The objective of the optimization is to ﬁnd the parameters
need to deﬁne a cost function relating the estimated relative ∗
θ maximizing the joint probability of the data given the
error eˆkl to the ground truth error e¯kl, and use backprop- model:
agation to compute the gradients on the neural network
∗
parameters of f and g. θ =argmax p(e¯|θ,X)=argmax logp(e¯|θ,X) (5)
θ θ
IV. IMPLEMENTATIONOFTHELEARNINGARCHITECTURE Thus after substitutin(cid:88)g 4:(cid:88) (cid:88)
A. Selecting informative features −
∗ n mi 1 mi
We handpicked features capturing as best as we thought θ =argmax log p(e¯ |θ,X ) (6)
ikl i
the nature of the constraints between keyframes, while θ
i=1 k=1 l=k+1
remaining easy to compute. They represent geometric and
AssuminganunbiasedGaussianerrormodelontheposes,
image-content information and are deﬁned on the basis of
we compute the probability of observing an error as e¯
the covisible landmarks between the two keyframes: given the learned error standard d(cid:112)eviation σ (cid:16)=eˆ (cid:17)(θ,Xik)l:
• the number of covisible landmarks ikl kl i
•(i.eth.ethteotnaulmnbuemrboefroothfeardkdeiytiforanmaleosbinsewrvhaitciohntshepyerarleanvdismibalrek) p(e¯kl |θ,X)=N(0,σikl)= 2π1σ2 e−12 σe¯iikkll 2 (7)
ikl
• the parallax deﬁned by the keyframes camera poses
Removing all terms not affecting the maximum, and
• the average distance between the landmark and the
switching to minimizing the negative log probability:
keyframes positions
∗ (cid:18) (cid:19)
• the global saliency of the landmarks (deﬁned in the θ =argmin −(cid:88)log(cid:88)p(e¯|(cid:88)θ,X)
dictionary used for the bag of words place recognition of θ
−
ORB SLAM2) n mi 1 mi e¯ 2
Histogramsarecomputedwiththeparallax,distance,num- =argmin log(σ2 )+ ikl (8)
ikl σ
berofobservationsandglobalsaliencyfeaturesassociatedto θ i=1 k=1 l=i+1 ikl
all covisible landmarks of an image pair. These histograms, with predicted standard deviations σ =eˆ (θ,X ).
ikl kl i
thenumberofcovisiblelandmarksandtheareaoftheoverlap We use equation 8 to compute the loss function for
between the two considered images are aggregated in the the neural network architecture. Backpropagation allows the
feature vector X . computationofthegradientsofthelossfunctionwithrespect
ij
to θ, as all intermediary operations are differentiable. The
B. Loss function
loss function can then be minimized using any gradient
The deﬁnition of an appropriate loss function for the descent algorithm.
optimization is conditioned by the deﬁnition of the error
model for e¯ that we are trying to learn. Ideally, one would V. RESULTS
kl
want to produce a full six dimensional error model for the We present results obtained by applying the learning
poses. However, our learning architecture rather explicits architecture on a simulated dataset relating to coverage path
synthetic topological information than metric information planning of crop ﬁelds. The simulation setup allows to
and relationships between the variables estimated by the generate at will datasets with precise ground truth positions,
SLAM. It is therefore impossible with this model to predict while being faithful enough to evaluate the SLAM and error
the full error model deﬁned by the covariances between the predictionarchitecture.Analternatetosimulatedrunswould
1123
Authorized licensed use limited to: Heriot-Watt University. Downloaded on September 21,2020 at 05:05:41 UTC from IEEE Xplore.  Restrictions apply. be to exploit real datasets, resorting to a full BA to deﬁne another ﬁxed minimum threshold on the output σ is set
(cid:57) kl
the keyframe poses ground truth. to 1e 5 to avoid division by 0 in the loss function (Equ. 8).
A. Simulation setup
C. Qualitative analysis
Thesimulationsetupinstantiatesaplan/execute/perceive
We depict here 3 representative examples, using models
loop in the context of UAV coverage. The environment is
learned on the whole dataset, excluding all the trajectories
simulated with high resolution 20cm orthorectiﬁed image from the same mapping mission as the considered example.
data1 projected on a ground plane. The scenes are rural
a) Trajectory A: This ﬁrst example is a simple bous-
plains,withnumerouscropparcels,taranddirtroads,sparse
trophedon trajectory. Fig. 3(a) shows the covisibility graph:
trees and bushes... Three 12×12 kilometer tiles deﬁne three
therearemanyloopclosuresbetweenthetrajectoryﬁrstfour
different environments.
legs, and a larger gap at the end.
A planning algorithm generates a Dubins trajectory cov-
ering the area to be mapped in a boustrophedon manner [7].
A value for the overlap of images on the ground is set: it 0.0
deﬁnes the distance between parallel trajectory legs. −0.1
The plan is fed to a UAV ﬂight simulator following the −0.2
Dubinstrajectoryperfectly,butwithaddednoisetointroduce
−0.3
variability. The camera is simulated as if stabilized in roll
−0.4
and pitch, barring small perturbations of a few degrees. This
model is not perfectly realistic, but it is good enough to −0.5
evaluate the SLAM algorithm performances in the presence −0.6
of moderate perturbations to the trajectory. −0.7
The UAV ﬂies at a constant altitude of 150m, and a
constant15m.s−1 airspeed.Duringﬂight,thepositionofth◦e (a)−C0−.8o2v.0isibili−ty1.8graph−(1c.6oordin−a1t.e4sinkm−1.2).Ever−y1.0keyfram−0e.8isma−rk0.6ed
UAV is transmitted to the Morse simulator [4], where a 61 with ,while marksthereferencekeyframeand marksevery
FoV800×600pixelscameraobservestheoverﬂownsceneat hundredthkeyframe.Covisibilityedgesshowingthelearnedweights
aredrawninshadesrangingfromsolidblue(highestweights)topale
32Hz.Theimagesarethenprocessedbyamodiﬁedversion grey(lowestweights.)
of the ORB SLAM2 monocular SLAM software [15].
The dataset comprises of 5 areas to be mapped, with very 2.5
distinct shapes. Every hundred new generated keyframes, σ0l
the covisibility graph with computed features as well as the meters2.0 e¯0l
SLAM and ground truth poses are recorded. The overﬂown
n
i
areas range from a half to a few km in length and width. 80 0
me1.5
runs were performed with a ground image overlap varying fra
y
from 30 to 90%, and a turn radius between 35 and 50m. ke
to1.0
B. Learning setup error
toStiemstultahteionlearrensiunlgtsawrcehreiteacgtugrree,gaatdeddinagndutphetodaatbaoseutt ufsoeudr relative0.5
thousand SLAM results, with a large variety of trajectories,
0.0
0 50 100 150 200 250
thanks to the variations on the overlap and turn radius. keyframeindexl
In addition, taking samples every hundred new keyframes (b) Relativeerrorswithrespecttokeyframe0( above).
ensures diversity in the graph sizes, all the more since Ground truth e¯0l is drawn in black, the shaded orange
areacoversthepredicted1-σ standarddeviationσ .
ORB SLAM2hasakeyframecullingroutine,whichinduces 0l
strong modiﬁcations of the graph when closing loops, espe-
0 1.0 0 1.0
cially with back and forth boustrophedon trajectories. 0.9 0.9
Fullyconnectedneuralnetworklayerswithrectiﬁedlinear 50 0.8 50 0.8
0.7 0.7
units were used for the f and g functions. A manual trial 100 0.6 100 0.6
anderrorprocesswasusedtosetthehyperparametersofthe 0.5 0.5
network, number of layers and units per layers. Function 150 0.4 150 0.4
0.3 0.3
f has 4 hidden layers with 700, 100, 100 and 10 units 0.2 0.2
200 200
respectively, and the g function has 2 hidden layers of 10 0.1 0.1
units each. 3 different weight sets α ...α are learned in 0 50 100 150 200 0.0 0 50 100 150 200 0.0
parallel and the 3 resistance distanc0es com2puted for each (c) Matrices of the relative errors between keyframes k and l. Left: nor-
malizedgroundtruthrelativeerrore¯ ,right:normalizedpredictedstandard
edge kl are combined by g to produce the σkl output. To deviationσkl. kl
ensure that no arcs disappear in the covisibility graph, a
minimum threshold is used on the weights, which is learned Fig.3. TrajectoryAresults
along with the other parameters of the network. Finally
ErrorsrelativetotheﬁrstkeyframeareshowninFig.3(b),
1fromthefrenchNationalGeographicInstitutehttp://ign.fr along with the 1-σ predicted uncertainty. One has to keep
1124
Authorized licensed use limited to: Heriot-Watt University. Downloaded on September 21,2020 at 05:05:41 UTC from IEEE Xplore.  Restrictions apply. 0 1.0 0 1.0
0.9 0.9 0.2
50 0.8 50 0.8
0.7 0.7 0.0
100 0.6 100 0.6 −0.2
0.5 0.5
150 0.4 150 0.4 −0.4
0.3 0.3
−0.6
0.2 0.2
200 200
0.1 0.1 −1.0 −0.5 0.0 0.5 1.0 1.5
0 50 100 150 200 0.0 0 50 100 150 200 0.0 (a) Covisibilitygraph(coordinatesinkm).Thetrajectorystartsatthe
(a) NormalizedGα0 (b) NormalizedGα1 meeting point of the shaft and the head of the hammer, goes forth
and back along the shaft, and then maps the head along back and
Fwiegi.gh4t.enWcoediegdhtiendcaodljoarcse).ncy matrices Gα0,1 for example A (normalized forthmotions.
4.0
σ0l
in mind that the observed error is only one realization of meters33..05 e¯0l
the predicted probability distribution, and is hence not ne- in
0
cessarily representative of the quality of the prediction. One me2.5
canhoweverseeinterestingtopologicalresults.Asexpected, yfra2.0
tahnedelroroorpgcrloowsusrwesith(ntehaerdkiesytafnracmeetos t7h5e raenfdere1n5c0e)kberyinfrgamthee, errortoke1.5
predicted error down. We can also observe the growth of ve1.0
the predicted uncertainty in the part weakly connected to relati0.5
the other parts (indices >175), as well as an observed error
peakinthesameregion.Herethepredictionsgloballyfollow 0.00 100 200 300 400 500 600 700
keyframeindexl
the same pattern as the actual errors – of course they are
(b) Relativeerrorswithrespecttokeyframe0( above)
probabilistic in nature, and there may be deviations with the
actual error, as we will see in other examples. 0 1.0 0 1.0
Fig.3(c)showsthewholerelativeerrormatrices,measured 0.9 0.9
100 100
0.8 0.8
and predicted (Fig. 3(b) actually plots the ﬁrst line of
200 0.7 200 0.7
these 2 matrices). We ﬁnd the same global structure in the 0.6 0.6
uncertainty estimate as in the ground truth error, with the 300 0.5 300 0.5
0.4 0.4
prediction seemingly being more conservative in the error 400 400
0.3 0.3
estimate. We ﬁnd again the error peak in the band around 500 0.2 500 0.2
index215,whichcorrespondtothelastturnofthetrajectory 0.1 0.1
(x = −0.7km, y = −0.3km) that is topologically the far- 6000 100 200 300 400 500 600 0.0 6000 100 200 300 400 500 600 0.0
thestawayfromthewellconnectedregionsofthebeginning. (c) Normalizedrelativeerrormatrices(groundtruthe¯kl andpredictedσkl)
Localmaximumsandminimumsseemtocorrelatewellwith Fig.5. TrajectoryBresults
the back and forth motions that close numerous local loops.
Finally we can observe the intermediate learned weighted
adjacencymatricesofthecovisibilitygraphG andG in
Fig. 4. In (a), we can clearly see that a varieαt0y of weαig1hts barely ﬁt in the predicted 1-σ envelope, as shown Fig. 5(b).
The predicted uncertainty is as expected at its maximum
havebeenlearned,however(b)showsforthesecondlearned
weight matrix a purely topological adjacency: all weights at the base of the shaft, around index 100. However, due
to its random walk nature, the error exhibits two peaks
havethesamevaluewhichcorrespondstothelowestpossible
correspondingtoamaximumerrorinthemiddleoftheshaft.
value given the threshold. Adding more intermediate G
α
seemtoalwaysproduceonlyoneinformativeweightmatrix, This structure can be found again in the relative error and
the other being (or very close to) a simple adjacency matrix uncertaintypredictionmatrices(Fig.5(c)).Weclearlyseethe
multiplied by the value of the threshold. We conjecture this bands corresponding to the shaft, as well as the dual peaks
indicatethatthestructureoftheproblemasposedonlyneeds in the ground truth error.
onedistancemetrictoperformthepredictionwithoutadding c) Trajectory C: This example shows a case with
redundant information, at least given the input features that very high errors, quite quickly accumulated, resulting in the
were used in our implementation. Indeed, using only one prediction failing to produce probable results. The executed
intermediate G produced very similar results in the values trajectory can be guessed by the covisibility graph Fig. 6(a).
α
ofthelossfunction,andthisappliestoallexploredexamples. In this case the relative errors to the ﬁrst keyframe attain
b) Trajectory B: This sample exhibits a single, long higher than average values, with peaks around 10m due to
back and forth trajectory that links to a well connected area, a 3km long motion without loop closure, and with rapidly
resembling the shape of a hammer (Fig. 5(a)). Here we varying errors (Fig. 6(b)). In contrast, the prediction never
expect the largest relative errors between the hammer head rises above 2m, which results in errors deviating by more
and the base of the shaft. than 5σ from the model. Here the model seems to be unable
Inthisinstance,theerrorsrelativetothestartingkeyframe to cope with very high and rapidly changing errors.
1125
Authorized licensed use limited to: Heriot-Watt University. Downloaded on September 21,2020 at 05:05:41 UTC from IEEE Xplore.  Restrictions apply. 0.0 Range Realized fraction Expected fraction
1σ 0.57 0.68
−0.3 2σ 0.86 0.95
−1.5 −1.0 −0.5 0.0 0.5 1.0 1.5
3σ 0.96 0.997
(a) Covisibilitygraph(coordinatesinkm)
4σ 0.992 0.99993
5σ 0.9995 0.9999994
12
σ0l Fig. 8. Fraction of the errors lying in the n(cid:57)σ range of the predicted
meters10 e¯0l dSitsattriisbtiuctsioncomanpduteedxpaeccrteodssf4ra0c0tiosnamapclceosrd(ianbgoutto1t0h%e noofrmthael ddaisttarsiebtu)t,ioonn.
0in 8 59millionsdatapoints.
me
yfra 6
ke include the aforementioned bias, as well as the failure to
errorto 4 predict very large and rapid deviations, as in trajectory C.
relative 2 We have presentedVaI.nDovISelCUapSpSrIoOaNch to learn a relative
0 error model for a monocular SLAM algorithm, using mostly
0 100 200 300 400 500
keyframeindexl topologicalinformationfromtheweightedcovisibilitygraph
(b) Relativeerrorswithrespecttokeyframe0( above). through the resistance distance, which shows promising
Predictiondeviationswrt.themaximumgroundtrutherror results. Although slightly overconﬁdent, the learned model
attainsupto5σ.
captures well the error variations caused by the graph topol-
Fig.6. TrajectoryCresults ogy,especiallylargescaletopologicalfeatures,whereasﬁner
variations seem less precisely modeled.
0.40 0.6 0.9 This work is only a ﬁrst step in the direction of mix-
00..3305 0.5 00..78 ing topological and metric information to predict SLAM
00..2205 00..34 000...456 uncertainties. Even with simpliﬁed simulations (no harsh
0.15 0.2 0.3 rotations,ﬂatground),predictionsarenotperfect.Themodel
00..0150 0.1 00..12 failsto capturethelarger uncertainties,especially withrapid
(a0.0)00 grou5ndgroundt1trr0uuthetrrohre¯1e5rror20e¯(b0.0)0 p1re2dpreidicct3edtsetandd4arddev5isatiotnaσ6nd7ard8 (c0.)00 de1videaviat2tioinofromnt3heprefdicrtio4one¯/mσ 5the6 variations, and sometimes smoothes too much the structure
deviationσ predictione¯/σ oftheerrorsinthegraph.Asprovenin[8]inthecaseof2D
SLAM, topological information and sensor precision alone
Fig.7. Histogramsofthegroundtrutherrore¯(inmeters),thepredicted are not sufﬁcient to completely explain the volume of the
standarddeviationσ(inmeters)andthedeviationofthegroundtrutherror
fromthepredictedstandarddeviatione¯/σ across400randomsamples,or uncertainty ellipsoids: metric information (e.g. the distance
about10%ofthedataset. betweenkeyframes)arealsonecessary.Inourwork,thefew
metric information included in the features are probably too
rudimentary, and the reliance on the SLAM solution for the
D. Quantitative results
computations of these features introduces bias.
We now examine statistical results computed on 400 Besides the need to engineer better features, other factors
trajectorysamples,orabout10%ofthedataset,foratotalof should be considered. In particular, the observed bias of the
about59millionsdatapoints.Threehistogramsoftheground ground truth error seems to indicate a deviation from the
truth error values e¯, of the predicted standard deviation σ, zero-mean Gaussian distributed error (which we use in our
andofthedeviationsoftheerrorfromthepredictedstandard model), that grows with the relative distance: this may be
deviation e¯/σ are shown Fig. 7. relatedtothelevereffectofangularerrorsontheposeerrors,
AscanbeseeninFig.7(a)themaximumerrorliesaround which our model does not account for.
20 meters, while the maximum predicted standard deviation Aninterestingdirectionforfutureworkwouldbeproduce
is under 8 meters (7(b)). The peak of standard deviation richermodels,withamorecomplexarchitecture,integrating
prediction is around 1.5 meters and almost no predicted more metric information to predict a full error model (on
standard deviations lie under 1m. Looking at the error, we each coordinate, including rotation angles). One of the dif-
see a slight bias: the peak is shifted around 25−50cm. As ﬁculties is to engineer a loss function that enables to mix
well, the peak of the deviation e¯/σ (7(c)) is shifted around positional and rotational errors with widely different scales.
0.25−0.5σ. In the absence of bias the peak should be at A possibility is to drive the learning so as to minimize the
zero in a normal distribution. errors on the landmarks poses. The rotation errors having a
strong non linear effect, integrating the error projection in
The maximum event is over ﬁve but under six sigma.
thelossfunctionishowevernottrivial.Analternatesolution
Events over 5σ are expected (approximately 1 every 1.7
is to exploit the loss function based on a matrix Lie groups
millions), but events over 6σ would not be (approximately 1
approach, as introduced in [16].
every 506 millions). Fractions of the population lying inside
(cid:57)
the n σ range, as well as the expected fraction value in a
normal distribution are compiled in table 8. These indicate a
slight overconﬁdence tendency of the uncertainty model, as
wellasadistributionwithheaviertails.Possibleexplanations
1126
Authorized licensed use limited to: Heriot-Watt University. Downloaded on September 21,2020 at 05:05:41 UTC from IEEE Xplore.  Restrictions apply. REFERENCES
[1] Cesar Cadena, Luca Carlone, Henry Carrillo, Yasir Latif, Davide
Scaramuzza,JoseNeira,IanReid,andJohnJ.Leonard. Past,Present,
andFutureofSimultaneousLocalizationAndMapping:Towardsthe
Robust-PerceptionAge. IEEETransactionsonRobotics,32(6):1309–
1332,December2016.
[2] HenryCarrillo,PhilipDames,VijayKumar,andJoseA.Castellanos.
Autonomous robotic exploration using occupancy grid maps and
graph SLAM based on Shannon and Re´nyi Entropy. In 2015 IEEE
InternationalConferenceonRoboticsandAutomation(ICRA),pages
487–494,Seattle,WA,USA,May2015.IEEE.
[3] HenryCarrillo,IanReid,andJoseA.Castellanos.Onthecomparison
ofuncertaintycriteriaforactiveSLAM. In2012IEEEInternational
Conference on Robotics and Automation, pages 2080–2087, St Paul,
MN,USA,May2012.IEEE.
[4] G. Echeverria, S. Lemaignan, A. Degroote, S. Lacroix, M. Karg,
P.Koch,C.Lesire,andS.Stinckwich. SimulatingComplexRobotic
ScenarioswithMORSE. In3rdInternationalConferenceonSimula-
tion, Modeling, and Programming for Autonomous Robots, Tsukuba
(Japan),Nov.2012.
[5] W.Ellens,F.M.Spieksma,P.VanMieghem,A.Jamakovic,andR.E.
Kooij.Effectivegraphresistance.LinearAlgebraanditsApplications,
435(10):2491–2506,November2011.
[6] ArpitaGhosh,StephenBoyd,andAminSaberi. MinimizingEffective
ResistanceofaGraph. SIAMReview,50(1):37–66,January2008.
[7] Nicolas Holvoet. Planning for active mapping of crop ﬁelds using
UAVs. Master’sthesis,ENAC,September2018.
[8] KasraKhosoussi. ExploitingtheIntrinsicStructuresofSimultaneous
LocalizationandMapping. PhDthesis,UTS,2017.
[9] Kasra Khosoussi, Matthew Giamou, Gaurav S Sukhatme, Shoudong
Huang,GaminiDissanayake,andJonathanPHow.Reliablegraphsfor
slam. The International Journal of Robotics Research, 38(2-3):260–
298,2019.
[10] KasraKhosoussi,ShoudongHuang,andGaminiDissanayake. Novel
insights into the impact of graph structure on SLAM. In Intelligent
RobotsandSystems(IROS2014),2014IEEE/RSJInternationalCon-
ferenceOn,pages2707–2714.IEEE,2014.
[11] KasraKhosoussi,ShoudongHuang,andGaminiDissanayake. Good,
badanduglygraphsforSLAM. InRSSWorkshopontheProblemof
MobileSensors,2015.
[12] AndrejKitanovandVadimIndelman.TopologicalMulti-RobotBelief
Space Planning in Unknown Environments. In 2018 IEEE Interna-
tional Conference on Robotics and Automation (ICRA), pages 1–7,
Brisbane,QLD,May2018.IEEE.
[13] Beipeng Mu, Matthew Giamou, Liam Paull, Ali-akbar Agha-
mohammadi, John Leonard, and Jonathan How. Information-based
activeSLAMviatopologicalfeaturegraphs. InDecisionandControl
(CDC), 2016 IEEE 55th Conference On, pages 5583–5590. IEEE,
2016.
[14] R. Mur-Artal, J. M. M. Montiel, and J. D. Tardo´s. ORB-SLAM: A
VersatileandAccurateMonocularSLAMSystem. IEEETransactions
onRobotics,31(5):1147–1163,October2015.
[15] RaulMur-ArtalandJuanD.Tardos. ORB-SLAM2:AnOpen-Source
SLAM System for Monocular, Stereo and RGB-D Cameras. IEEE
TransactionsonRobotics,33(5):1255–1262,2017.
[16] V.PeretroukhinandJ.Kelly.Dpc-net:Deepposecorrectionforvisual
localization. IEEERoboticsandAutomationLetters,3(3):2424–2431,
July2018.
[17] A.RanganathanandF.Dellaert. Inferenceinthespaceoftopological
maps: An MCMC-based approach. In 2004 IEEE/RSJ International
Conference on Intelligent Robots and Systems (IROS) (IEEE Cat.
No.04CH37566), volume 2, pages 1518–1523, Sendai, Japan, 2004.
IEEE.
[18] Ananth Ranganathan and Frank Dellaert. Online probabilistic topo-
logical mapping. The International Journal of Robotics Research,
30(6):755–771,May2011.
[19] Georges Younes, Daniel Asmar, Elie Shammas, and John Zelek.
Keyframe-based monocular SLAM: design, survey, and future direc-
tions. RoboticsandAutonomousSystems,98,2017.
[20] Zhen Zhu and Clark Taylor. Conservative Uncertainty Estimation
in Map-Based Vision-Aided Navigation. IEEE Transactions on
AerospaceandElectronicSystems,53(2):941–949,April2017.
1127
Authorized licensed use limited to: Heriot-Watt University. Downloaded on September 21,2020 at 05:05:41 UTC from IEEE Xplore.  Restrictions apply. 